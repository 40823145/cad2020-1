/*
 * This code is for Internal Salesforce use only, and subject to change without notice.
 * Customers shouldn't reference this file in any web pages.
 */
function OverlayDialog(){this.dialog=this.id=null;this.isModal=!0;this.extraClass="";this.background=null;this.width=OverlayDialog.MAX_WIDTH;this.minHeight=OverlayDialog.MIN_HEIGHT;this.minWidth=OverlayDialog.MIN_WIDTH;this.buttons=[];this.info=this.header=this.title=null;this.created=this.isOpen=!1;this.allowKeyboardEsc=this.displayX=!0;this.resizing=this.moving=this.positioned=this.isAbsolutePositioned=this.isMovable=this.isResizable=!1;this.changeY=this.changeX=this.relativeY=this.relativeX=this.fixedY=
this.fixedX=0;this.wrappingPointId=this.focusPointId=null;this.focusOnShow=!0;this.closeButtonAction=null;this.showFooter=this.showHeader=!0;this.useCSS=!1;this.htmlOverflow="";this.refreshOnClose=!1}OverlayDialog.MAX_BUTTONS=4;OverlayDialog.MAX_WIDTH=800;OverlayDialog.MIN_WIDTH=300;OverlayDialog.MIN_HEIGHT=200;OverlayDialog.EDGE_BUFFER=40;OverlayDialog.LOAD_MARK="OverlayLoadStart";OverlayDialog.HIDDEN_STYLE="width:2px;height:2px;position:absolute;border:0;margin:0;padding:0;background:none;outline:none;z-index:-1;cursor:none;";
OverlayDialog.prototype.addEvents=function(){if(this.id){var a=this;this.allowKeyboardEsc&&addEvent(document,"keydown",function(c){a.handleKeyPress(c)},!1);this.useCSS||(addEvent(window,"resize",function(){a.resizeEvent()},!1),Sfdc.userAgent.isIE6&&addEvent(window,"scroll",function(){a.scrollEvent()},!1))}};OverlayDialog.prototype.setTitle=function(a){this.title=a;this.created&&(document.getElementById(this.id+"Title").innerHTML=this.title)};
OverlayDialog.prototype.setHeader=function(a){this.header=a;this.created&&(document.getElementById(this.id+"Header").innerHTML=this.header)};OverlayDialog.prototype.setInfo=function(a){this.info=a;this.created&&(document.getElementById(this.id+"Info").innerHTML=this.info)};OverlayDialog.prototype.setWidth=function(a){this.width=a;this.dialog&&(Sfdc.isDefAndNotNull(a)&&(this.dialog.style.width="string"==typeof a?a:a+"px"),this.isOpen&&this.position())};
OverlayDialog.prototype.setMinHeight=function(a){this.minHeight=a};OverlayDialog.prototype.setMinWidth=function(a){this.minWidth=a};OverlayDialog.prototype.overrideButton=function(a,c,b){if(a>=OverlayDialog.MAX_BUTTONS)throw"Cannot have more than "+OverlayDialog.MAX_BUTTONS+" buttons.";this.buttons[a]={display:c,action:b}};
OverlayDialog.prototype.setupDefaultButtons=function(){this.buttons=[];this.buttons[0]={display:LC.getLabel("Buttons","ok"),action:null};this.buttons[1]={display:LC.getLabel("Buttons","cancel"),action:null}};OverlayDialog.prototype.clearButtons=function(){this.buttons=[]};
OverlayDialog.prototype.show=function(){if(this.useCSS){var a=this.getPageOverflowElement();this.htmlOverflow=a.style.overflow;a.style.overflow="hidden"}this.dialog?(this.dialog.style.display="block",this.position(),this.isModal&&(this.background||this.createBackground(),this.resizeBackground(),this.background.style.display="block",this.processSelectElems()),this.dialog.style.visibility="visible",this.isOpen=!0,Sfdc.Function.delay(this.setPrimaryFocus,1,this,[this]),window.Perf&&Perf.endMark(OverlayDialog.LOAD_MARK)):
Sfdc.log("WARNING \x3e OverlayDialog.show() was called even though no dialog object had been created with createDialog(). This means that the dialog creation failed or is stuck in the Aloha onLoad queue.")};
OverlayDialog.prototype.setPrimaryFocus=function(a,c){a||(a=this);if(!0===c){if(null!==a.wrappingPointId){var b=document.getElementById(a.wrappingPointId);if(null!==b&&!0!==b.disabled)try{b.focus()}catch(d){}else Sfdc.error(a.wrappingPointId+" could not be focused")}}else if(!0===a.focusOnShow){b=null;null!==a.focusPointId&&(b=document.getElementById(a.focusPointId));if(null===b||b.disabled||"none"===b.style.display||"hidden"===b.style.display.visibility){var e=a.dialog.getElementsByTagName("*"),
f=null,h=null;for(i=0;i<e.length;i++)if(!e[i].disabled&&!("none"===e[i].style.display||"hidden"===e[i].style.visibility)){var g=e[i].tagName;if("INPUT"===g||"TEXTAREA"===g||"SELECT"===g){h=i;break}null===f&&"A"===g&&(f=i)}null!==h?b=e[h]:null!==f&&(b=e[f])}if(null!==b&&!0!==b.disabled){try{b.focus()}catch(k){}("text"==b.type||"textarea"==b.type)&&b.select()}else Sfdc.error(a.focusPointId+" could not be focused")}};
OverlayDialog.prototype.processSelectElems=function(a){if(Sfdc.userAgent.isIE6){for(var c=document.getElementsByTagName("select"),b=c.length,d=0;d<b;d++)c[d].style.visibility=a?"visible":"hidden";if(!a){a=this.dialog.getElementsByTagName("select");c=a.length;for(d=0;d<c;d++)a[d].style.visibility="visible"}}};
OverlayDialog.prototype.hide=function(){this.isMovable&&this.stopDrag();this.isModal&&(this.background.style.display="none",this.processSelectElems(!0));this.dialog.style.visibility="hidden";setTimeout(function(){this.dialog.style.display="none"}.bind(this),0);this.useCSS&&(this.getPageOverflowElement().style.overflow=this.htmlOverflow);this.htmlOverflow="";this.isOpen=!1;this.refreshOnClose&&(Sfdc.userAgent.isChromeFrame?window.location=window.location:window.location.reload(!0))};
OverlayDialog.prototype.getPageOverflowElement=function(){return Sfdc.userAgent.isFirefox?document.body:document.documentElement};OverlayDialog.prototype.cancel=function(){this.hide()};OverlayDialog.prototype.handleKeyPress=function(a){if(this.isOpen){a=getEvent(a);var c=a.keyCode;c==KEY_ESC&&this.allowKeyboardEsc?("function"==typeof this.closeButtonAction&&this.closeButtonAction(),this.handleCancel()):c==KEY_ENTER&&this.captureEnter(getEventTarget(a))&&this.enter()}};
OverlayDialog.prototype.captureEnter=function(a){return"A"!=a.nodeName&&"TEXTAREA"!=a.nodeName&&"button"!=a.type};OverlayDialog.prototype.enter=function(){};OverlayDialog.prototype.handleCancel=function(){this.cancel()};
OverlayDialog.prototype.position=function(){if(this.dialog){var a=this.dialog.style;if(this.useCSS)a.marginTop=-0.25*this.dialog.offsetHeight+"px",LC&&LC.isRtlPage()?a.marginRight=-0.5*this.dialog.offsetWidth+"px":a.marginLeft=-0.5*this.dialog.offsetWidth+"px";else if(this.resizing){var c=this.startWidth+this.changeX,b=this.startHeight+this.changeY;c<this.minWidth&&(c=this.minWidth);b<this.minHeight&&(b=this.minHeight);a.width=c+"px";a.height=b+"px";document.getElementById(this.getContentId()).style.height=
b-46+"px"}else{if(c=document.getElementById(this.getContentId()))c.style.height="",c.style.overflowY="",c.style.position="",this.dialog.offsetHeight>getWindowHeight()&&(c.style.height=getWindowHeight()-100+"px",c.style.overflowY="auto",c.style.position="relative");if(this.positioned){var c=Sfdc.Window.getWindowWidth()-OverlayDialog.EDGE_BUFFER,b=Sfdc.Window.getWindowHeight()-OverlayDialog.EDGE_BUFFER,d=OverlayDialog.EDGE_BUFFER-this.dialog.offsetWidth,e=-OverlayDialog.EDGE_BUFFER/2;this.fixedX<d?
this.fixedX=d:this.fixedX>c&&(this.fixedX=c);this.fixedY<e?this.fixedY=e:this.fixedY>b&&(this.fixedY=b)}else this.setInnerHeight(),c=Sfdc.Window.getWindowWidth()-this.dialog.offsetWidth,c=6>c?6:c/2,b=Sfdc.Window.getWindowHeight()-this.dialog.offsetHeight,this.fixedX=c,this.fixedY=6>b?6:b/2;Sfdc.userAgent.isIE6?(a.left=this.fixedX+getScrollX()+"px",a.top=this.fixedY+getScrollY()+"px"):(a.left=this.fixedX+"px",a.top=this.fixedY+"px")}}};OverlayDialog.prototype.setInnerHeight=function(){};
OverlayDialog.prototype.createBackground=function(){this.background=document.createElement("div");this.background.className="overlayBackground";this.useCSS&&(Sfdc.userAgent.isSafariIOS?(this.background.style.width=document.body.scrollWidth+"px",this.background.style.height=document.body.scrollHeight+"px"):(this.background.style.width="10000px",this.background.style.height="20000px"));document.body.appendChild(this.background);var a=this;addEvent(this.background,"mousedown",function(c){a.smash(c)},
!1);addEvent(this.background,"click",function(c){a.smash(c)},!1)};OverlayDialog.prototype.resizeBackground=function(){if(this.background&&!this.useCSS&&this.created){var a=this.background.style;this.dialog.currentStyle&&Sfdc.userAgent.isIE6?(a.width=document.body.offsetWidth+"px",a.height=document.body.offsetHeight+"px"):(a.width=Math.max(document.documentElement.scrollWidth,Sfdc.Window.getWindowWidth())+"px",a.height=Math.max(document.documentElement.scrollHeight,Sfdc.Window.getWindowHeight())+"px")}};
OverlayDialog.prototype.scrollEvent=function(){this.created&&this.position()};OverlayDialog.prototype.resizeEvent=function(){this.resizeBackground();this.position()};
OverlayDialog.prototype.createDialog=function(){this.dialog=this.createDialogElement();document.body.appendChild(this.dialog);this.setWidth(this.width);var a=this;addEvent(document.getElementById(this.blurCatchId),"focus",function(){a.setPrimaryFocus(a,!0)});addEvent(document.body,"keyup",function(){if(a&&a.isOpen){for(var b=document.activeElement,c=!0;b.id!=a.id;){if(b===document.body){c=!1;break}b=b.parentNode}c||a.setPrimaryFocus(a)}});if(!this.useCSS&&(this.isMovable||this.isResizable))if(addEvent(document,
"mouseup",function(){a.stopDrag()},!1),this.isMovable&&(addEvent(this.dialog.firstChild,"mousedown",function(b){a.startMove(b)},!1),addEvent(document,"mousemove",function(b){a.move(b)},!1)),this.isResizable){var c=document.getElementById(this.id+"Resize");addEvent(c,"mousedown",function(b){a.startResize(b)},!1);addEvent(document,"mousemove",function(b){a.resize(b)},!1)}this.createContent();this.created=!0};
OverlayDialog.prototype.createDialogElement=function(){this.blurCatchId=this.id+"BlurCatch";this.focusPointId=this.id+"FocusPoint";this.wrappingPointId=this.displayX?this.id+"X":this.focusPointId;var a=this.id+"Title",c=document.createElement("div");c.id=this.id;c.setAttribute("role","dialog");c.setAttribute("aria-live","assertive");c.setAttribute("aria-describedby",a);var b=["overlayDialog"];this.isAbsolutePositioned&&b.push("absolutePositionedOverlayDialog");this.useCSS&&b.push("cssDialog");b.push(this.extraClass);
c.className=b.join(" ");b=[];b.push("\x3cdiv class\x3d'topRight");this.isMovable&&b.push(" movable");b.push("'");this.showHeader||b.push(" style\x3d'display:none;'");b.push("\x3e");b.push("\x3ca id\x3d'"+this.focusPointId+"' ");b.push("href\x3d'javascript:void(0)' ");b.push("onclick\x3d'return false;' ");b.push("style\x3d'"+OverlayDialog.HIDDEN_STYLE+"' ");b.push("title\x3d'"+LC.getLabel("Global","startOfDialog")+"' ");this.displayX&&b.push("onfocus\x3d'document.getElementById(\""+this.wrappingPointId+
"\").focus()'");b.push("\x3e");b.push(LC.getLabel("Global","startOfDialog"));b.push("\x3c/a\x3e");b.push("\x3cdiv class\x3d'topLeft'\x3e");this.displayX&&(b.push("\x3ca id\x3d'"+this.wrappingPointId+"' title\x3d'"+LC.getLabel("Buttons","close")+"' tabindex\x3d'0' onmouseover\x3d\"this.className \x3d 'dialogCloseOn'\" onmouseout\x3d\"this.className \x3d 'dialogClose'\" onclick\x3d\"var dlg \x3d sfdcPage.getDialogById('"),b.push(this.id),b.push("');"),"function"==typeof this.closeButtonAction&&b.push("dlg.closeButtonAction();"),
b.push("dlg.cancel()\" href\x3d'javascript:void(0)' class\x3d'dialogClose'\x3e"+LC.getLabel("Buttons","close")+"\x3c/a\x3e"));b.push("\x3ch2 id\x3d'"+a+"'\x3e");b.push(this.title);b.push("\x3c/h2\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'middle'\x3e\x3cdiv class\x3d'innerContent' id\x3d'");b.push(this.getContentId());b.push("'\x3e\x3c/div\x3e\x3c/div\x3e");this.isResizable&&(b.push("\x3cdiv id\x3d'"),b.push(this.id),b.push("Resize' class\x3d'dialogResize'\x3e\x3c/div\x3e"));b.push("\x3cdiv class\x3d'bottomRight'");
this.showFooter||b.push(" style\x3d'display:none;'");b.push('\x3e\x3clabel style\x3d"display:none;" for \x3d"'+this.blurCatchId+"\"\x3e'\x26nbsp;'\x3c/label\x3e\x3cinput id\x3d'"+this.blurCatchId+"' style\x3d'"+OverlayDialog.HIDDEN_STYLE+"' type\x3d'text' /\x3e\x3cdiv class\x3d'bottomLeft'\x3e\x3c/div\x3e\x3c/div\x3e");c.innerHTML=b.join("");return c};OverlayDialog.prototype.createContent=function(){};
OverlayDialog.prototype.startMove=function(a){a=getEvent(a);"IMG"!=getEventTarget(a).nodeName&&(this.moving=this.positioned=!0,this.relativeX=a.clientX-this.dialog.offsetLeft,this.relativeY=a.clientY-this.dialog.offsetTop,Sfdc.userAgent.isIE6&&(this.relativeX+=getScrollX(),this.relativeY+=getScrollY()),this.fixedX=a.clientX-this.relativeX,this.fixedY=a.clientY-this.relativeY,this.smash(a))};
OverlayDialog.prototype.startResize=function(a){a=getEvent(a);this.resizing=this.positioned=!0;this.relativeX=a.clientX;this.relativeY=a.clientY;this.startWidth=this.dialog.offsetWidth;this.startHeight=this.dialog.offsetHeight;this.smash(a)};OverlayDialog.prototype.stopDrag=function(){this.resizing=this.moving=!1};OverlayDialog.prototype.move=function(a){this.moving&&(a=getEvent(a),this.smash(a),this.fixedX=a.clientX-this.relativeX,this.fixedY=a.clientY-this.relativeY,this.position())};
OverlayDialog.prototype.resize=function(a){this.resizing&&(a=getEvent(a),this.smash(a),this.changeX=a.clientX-this.relativeX,this.changeY=a.clientY-this.relativeY,this.position())};OverlayDialog.prototype.smash=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1};OverlayDialog.prototype.getContentId=function(){return this.id+"Content"};
OverlayDialog.prototype.createButtons=function(a){a.push("\x3cdiv id\x3d'"+this.id+"_buttons' class\x3d'buttons ");a.push("zen");a.push("'\x3e");for(var c=0;c<this.buttons.length;c++){var b=this.buttons[c].display,d=this.buttons[c].action,e=this.buttons[c].id;a.push("\x3cinput class\x3d'");a.push("zen-btn");a.push("' type\x3d'button' value\x3d'");a.push(b);e&&(a.push("' id\x3d'"),a.push(e));a.push("' onclick\x3d\"");"string"==typeof d?(a.push("if("),a.push(d.replace(/"/,'\\"')),a.push(")")):"function"==
typeof d&&(a.push("if("),a.push(d.name),a.push("())"));a.push("sfdcPage.getDialogById('");a.push(this.id);a.push("').hide();\"\x3e")}a.push("\x3c/div\x3e")};OverlayDialog.prototype.register=function(){sfdcPage.registerDialog(this)};
function AccessibleObjectList(a){this.init(a)}
Ext.extend(AccessibleObjectList,ObjectList,{init:function(a){this.id=a.id;this.engDiv=a.engDiv;this.gridDiv=a.gridDiv;this.loadingScreen=a.loadingScreen;this.userId=a.userId;this.currentPageUrl=a.currentPageUrl;this.motifKey=a.motifKey;this.activeTabName=a.activeTabName;this.accessibleColumnChooserUrl=a.accessibleColumnChooserUrl;ObjectList.addObjectList(this);this.doEmptyHeader()},render:function(a){},setListDefinition:function(a,b){this.type=a.type;this.listDefinition=a;this.listDefaults=b;this.numberOfItemsPerPage=
b.pageSize;this.nextPageAvailable=!1;this.currentPage=1;this.currentSort=b.sort;this.currentDir=b.dir;this.selectedItems=new Map;this.cookieUpdated=!1;this.selModel=this;this.colsInSelection=this.getColsInSelection();this.superclass.colsInSelection=this.colsInSelection;Knowledge.isNull(this.listDefinition.idColumnName)?this.realIdColumnName=this.listDefinition.columnDefinitions[0].name:this.realIdColumnName=this.listDefinition.idColumnName;this.createHeader();this.cols=this.getColumnsFromColDefs(100)},
load:function(a){this.data=a;this.numberOfItemsInCurrentPage=a.rows.length;this.numberOfDisabledItems=0},updatePageNavigator:function(a,b){this.currentPage=a;this.nextPageAvailable=b},updateCompleted:function(){var a=[];(!this.listDefinition.pageBlockTitle||0===this.listDefinition.pageBlockTitle.length)&&this.createBeforeTable(a,!0);this.createTableHeader(a);this.fillTableData(a,this.data.rows);this.createTableFooter(a);(!this.listDefinition.pageBlockTitle||0===this.listDefinition.pageBlockTitle.length)&&
this.createBeforeTable(a,!1);this.gridDiv.innerHTML=a.join("");this.listDefinition.isMultiSelectable&&this.updateSelectionHeader();this.lastUpdate=new Date},createBeforeTable:function(a,b,c){a.push("\x3cdiv class\x3d'bNext'\x3e");b&&(a.push("\x3cdiv class\x3d'next' style\x3d'text-align: left; float: left;'\x3e"),a.push('\x3ca href\x3d"#" onclick\x3d"AccessibleObjectList.callColumnChooser(\''+this.id+"'); return false;\" \x3e"),a.push(this.listDefinition.labels.ArticleListLabels.CustomizeColumns),
a.push("\x3c/a\x3e\x3c/div\x3e"));c&&this.createMoreFewer(a);if(1<this.currentPage||this.nextPageAvailable)a.push("\x3cdiv class\x3d'next'\x3e"),1<this.currentPage?(a.push("\x3ca href\x3d'' title\x3d\""+this.listDefinition.labels.List.prev+'"'),a.push(" onclick\x3d\"AccessibleObjectList.reloadPage('"+this.id+"', "+(this.currentPage-1)+');return false;"\x3e'),a.push("\x26lt;"+this.listDefinition.labels.List.prev),a.push("\x3c/a\x3e")):(a.push("\x3cspan class\x3d'greyedLink'\x3e"),a.push("\x26lt;"+
this.listDefinition.labels.List.prev),a.push("\x3c/span\x3e")),a.push("\x26nbsp;|\x26nbsp;"),this.nextPageAvailable?(a.push("\x3ca href\x3d'' title\x3d\""+this.listDefinition.labels.List.next+'"'),a.push(" onclick\x3d\"AccessibleObjectList.reloadPage('"+this.id+"', "+(this.currentPage+1)+');return false;"\x3e'),a.push(this.listDefinition.labels.List.next+"\x26gt;"),a.push("\x3c/a\x3e")):a.push("\x3cspan class\x3d'greyedLink'\x3e"+this.listDefinition.labels.List.next+"\x26gt;\x3c/span\x3e"),a.push("\x3c/div\x3e");
a.push("\x3cdiv class\x3d'clearingBox'\x3e\x3c/div\x3e");a.push("\x3c/div\x3e")},createTableHeader:function(a){var b=[],c=0,d;a.push("\x3cdiv class\x3d'bPageBlock secondaryPalette'\x3e");this.createButtons(a,!0);a.push("\x3cdiv class\x3d'pbBody'\x3e");this.listDefinition.pageBlockTitle&&0<this.listDefinition.pageBlockTitle.length&&this.createBeforeTable(a,!0);a.push("\x3ctable class\x3d'list' width\x3d'100%' cellspacing\x3d'0' cellpadding\x3d'0' border\x3d'0'\x3e");a.push("\x3ctr class\x3d'headerRow'\x3e");
this.listDefinition.isMultiSelectable&&(a.push('\x3cth scope\x3d"col" style\x3d"width:20px;"\x3e'),a.push('\x3cinput type\x3d"checkbox"'),a.push(' id\x3d"'+this.id+'_allCheckbox"'),a.push('title\x3d"'+this.listDefinition.labels.List.toggleall+'"'),a.push("onclick\x3d\"AccessibleObjectList.togglePageInSelection(this, '"+this.id+"');\""),a.push("/\x3e"),a.push("\x3clabel class\x3d'skipElement' for\x3d\""+this.id+'_allCheckbox"\x3e'+this.listDefinition.labels.List.toggleall+"\x3c/label\x3e"),a.push("\x3c/th\x3e"));
for(var e=0;e<this.cols.length;e++)this.cols[e]!=this&&!1===this.cols[e].hidden&&(d=this.cols[e].coldef.width,b.push(d),c+=d);if(0<c&&100!=c)for(e=0;e<b.length;e++)b[e]=100*(b[e]/c);for(e=c=0;e<this.cols.length;e++)if(this.cols[e]!=this&&!1===this.cols[e].hidden){d=b[c];c++;a.push("\x3cth scope\x3d'col' style\x3d'width:"+d+"%;'\x3e");if(this.cols[e].sortable)if(this.currentSort==this.cols[e].dataIndex){var f,h;"DESC"==this.currentDir?(f=this.cols[e].header+" - "+this.listDefinition.labels.Home.sortDescArrow,
h="/img/sort_desc_arrow.gif",d=this.cols[e].header+" - "+this.listDefinition.labels.ArticleListLabels.ClickSortAscending):(f=this.cols[e].header+" - "+this.listDefinition.labels.Home.sortAscArrow,h="/img/sort_asc_arrow.gif",d=this.cols[e].header+" - "+this.listDefinition.labels.ArticleListLabels.ClickSortDescending);a.push("\x3ca href\x3d'' title\x3d\""+f+'"');a.push(" onclick\x3d\"AccessibleObjectList.reloadSort('"+this.id+"', '"+this.cols[e].dataIndex+"', '"+("DESC"==this.currentDir?"ASC":"DESC")+
"');return false;\"\x3e");a.push(this.cols[e].header);a.push("\x3cimg height\x3d'14' align\x3d'texttop' width\x3d'21'");a.push('title\x3d"'+d+'"');a.push('alt\x3d"'+d+'"');a.push('src\x3d"'+h+'" /\x3e')}else d="DESC"==this.cols[e].coldef.sortOrder?this.cols[e].header+" - "+this.listDefinition.labels.ArticleListLabels.ClickSortDescending:this.cols[e].header+" - "+this.listDefinition.labels.ArticleListLabels.ClickSortAscending,a.push("\x3ca href\x3d''"),a.push(' title\x3d"'+d+'"'),a.push(" onclick\x3d\"AccessibleObjectList.reloadSort('"+
this.id+"', '"+this.cols[e].dataIndex+"', '"+this.cols[e].coldef.sortOrder+"');return false;\""),a.push("\x3e"+this.cols[e].header+"\x3c/a\x3e");else a.push(this.cols[e].header);a.push("\x3c/th\x3e")}a.push("\x3c/tr\x3e")},createButtons:function(a,b){var c=this.listDefinition.header;if(c.tbItems){b?a.push("\x3cdiv class\x3d'pbHeader'\x3e"):a.push("\x3cdiv class\x3d'pbBottomButtons'\x3e");a.push("\x3ctable cellspacing\x3d'0' cellpadding\x3d'0' border\x3d'0'\x3e\x3ctr\x3e\x3ctd class\x3d'pbTitle'\x3e");
b&&this.listDefinition.pageBlockTitle?(a.push('\x3cimg class\x3d"minWidth" width\x3d"1" height\x3d"1" title\x3d"" alt\x3d"" src\x3d"/s.gif"/\x3e'),this.listDefinition.pageBlockIcon&&a.push(this.listDefinition.pageBlockIcon),a.push("\x3ch3\x3e"+this.listDefinition.pageBlockTitle+"\x3c/h3\x3e")):a.push("\x26nbsp;");a.push("\x3c/td\x3e\x3ctd class\x3d'pbButtonb'\x3e");for(var d=0;d<c.tbItems.length;d++)switch(0<d&&a.push("\x26nbsp;"),c.tbItems[d].type){case "button":a.push("\x3cinput type\x3d'button'"),
a.push(' id\x3d"'+this.id+(b?"_header":"_footer")+"_but_"+d+'"'),a.push(' title\x3d"'+c.tbItems[d].tooltip+'"'),a.push(' alt\x3d"'+c.tbItems[d].tooltip+'"'),a.push(' value\x3d"'+c.tbItems[d].label+'"'),a.push(" onclick\x3d'Knowledge.call("+Ext.encode(c.tbItems[d].javascript)+", ObjectList.instances."+this.id+");'"),a.push(' class\x3d"btn"'),a.push("/\x3e")}a.push("\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e");a.push("\x3c/div\x3e")}},fillTableData:function(a,b){for(var c=0;c<b.length;c++){var d=Knowledge.isNull(this.listDefinition.isSelectableColumnName)||
b[c][this.listDefinition.isSelectableColumnName],e="dataRow",e=0===c%2?e+" even":e+" odd";0===c&&(e+=" first");c==b.length-1&&(e+=" last");a.push("\x3ctr class\x3d'"+e+"'");a.push(' onmouseover\x3d"if (window.hiOn) {hiOn(this);}"');a.push(' onmouseout\x3d"if (window.hiOff) {hiOff(this);}"');a.push(' onfocus\x3d"if (window.hiOn) {hiOn(this);}"');a.push(' onblur\x3d"if (window.hiOff) {hiOff(this);}"');a.push("\x3e");this.listDefinition.isMultiSelectable&&(a.push("\x3ctd class\x3d'dataCell'\x3e"),this.listDefinition.disabledCheckboxCSS&&
!d?(a.push("\x3cdiv"),a.push(' class\x3d"'+this.listDefinition.disabledCheckboxCSS+'"'),this.listDefinition.disabledCheckboxTitle&&a.push(' title\x3d"'+this.listDefinition.disabledCheckboxTitle+'"'),a.push("\x3e")):(a.push("\x3cinput type\x3d'checkbox'"),a.push(' id\x3d"'+this.id+"_checkbox_"+c+'"'),a.push(" onclick\x3d\"AccessibleObjectList.toggleItemInSelection(this, '"+this.id+"', "+c+');"'),!Knowledge.isNull(this.listDefinition.idColumnName)&&this.selectedItems.get(b[c][this.listDefinition.idColumnName])&&
(a.push(' checked\x3d"checked"'),this.addItemInSelection(b[c])),d||(this.numberOfDisabledItems++,a.push(' disabled\x3d"disabled"')),a.push("/\x3e")),a.push("\x3c/td\x3e"));for(d=0;d<this.cols.length;d++)this.cols[d]!=this&&!1===this.cols[d].hidden&&(e=b[c][this.cols[d].dataIndex],e=Knowledge.isNull(e)||""===e?"\x26nbsp;":e,a.push("\x3ctd class\x3d'dataCell'\x3e"),this.listDefinition.columnAsExtensionRowContent&&this.listDefinition.containerColumnNameOfExtensionRowContent&&this.listDefinition.containerColumnNameOfExtensionRowContent==
this.cols[d].dataIndex?(a.push("\x3cdiv\x3e"),a.push(e),a.push("\x3c/div\x3e"),a.push("\x3cdiv\x3e"),a.push(b[c][this.listDefinition.columnAsExtensionRowContent]),a.push("\x3c/div\x3e")):a.push(e),a.push("\x3c/td\x3e"));a.push("\x3c/tr\x3e")}},createTableFooter:function(a){a.push("\x3c/table\x3e");this.listDefinition.pageBlockTitle&&0<this.listDefinition.pageBlockTitle.length?this.createBeforeTable(a,!1,!0):this.createMoreFewer(a);a.push("\x3c/div\x3e");this.createButtons(a,!1);a.push("\x3cdiv class\x3d'pbFooter secondaryPalette\x3e\x3cdiv class\x3d'bg' /\x3e\x3c/div\x3e");
a.push("\x3c/div\x3e")},createMoreFewer:function(a){var b=this.listDefinition.labels,c=[],d=[];0<this.numberOfItemsPerPage-10&&(c.push("\x3ca href\x3d'' title\x3d\""+b.KnowledgeTab.fewerArrow+'"'),c.push(" onclick\x3d\"AccessibleObjectList.reloadPageSize('"+this.id+"', "+(this.numberOfItemsPerPage-10)+');return false;"\x3e'),c.push(b.List.number_shown_adjust_less_link),c.push("\x3cimg height\x3d'15' align\x3d'texttop' width\x3d'17' src\x3d\"/img/show_fewer_arrow.gif\""),c.push(' title\x3d"'+b.KnowledgeTab.fewerArrow+
'" alt\x3d"'+b.KnowledgeTab.fewerArrow+'"/\x3e'),c.push("\x3c/a\x3e"));if(200>=this.numberOfItemsPerPage+10&&(this.nextPageAvailable||1<this.currentPage))d.push("\x3ca href\x3d'' title\x3d\""+b.KnowledgeTab.moreArrow+'"'),d.push(" onclick\x3d\"AccessibleObjectList.reloadPageSize('"+this.id+"', "+(this.numberOfItemsPerPage+10)+');return false;"\x3e'),d.push("\x3cimg height\x3d'15' align\x3d'texttop' width\x3d'17' src\x3d\"/img/show_more_arrow.gif\""),d.push(' title\x3d"'+b.KnowledgeTab.moreArrow+'" alt\x3d"'+
b.KnowledgeTab.moreArrow+'"/\x3e'),d.push(b.List.number_shown_adjust_more_link),d.push("\x3c/a\x3e");if(0<c.length||0<d.length)b=b.List.number_shown_adjust.replace("{0}",c.join("")),b=b.replace("{1}",d.join("")),a.push("\x3cdiv class\x3d'fewerMore'\x3e"+b+"\x3c/div\x3e")},getVisibleColums:function(){for(var a=new Map,b=0;b<this.cols.length;b++)this.cols[b]!=this&&!1===this.cols[b].hidden&&a.put(this.cols[b].coldef.name,this.cols[b].coldef.name);for(b=0;b<this.listDefinition.columnDefinitions.length;b++){var c=
this.listDefinition.columnDefinitions[b];!Knowledge.isNull(a.map[c.name])&&(!Knowledge.isNull(c.groupBy)&&""!==c.groupBy)&&a.put(c.groupBy,c.groupBy);Knowledge.isNull(a.map[c.name])&&c.alwaysFetched&&a.put(c.name,c.name)}Knowledge.isNull(this.listDefinition.idColumnName)||a.put(this.listDefinition.idColumnName,this.listDefinition.idColumnName);Knowledge.isNull(this.listDefinition.isSelectableColumnName)||a.put(this.listDefinition.isSelectableColumnName,this.listDefinition.isSelectableColumnName);
var b=[],d;for(d in a.map)d&&b.push(d);return b},reload:function(a,b,c,d){var e=this.getVisibleColums();updateData(d,c,a,b,Ext.encode(e))},selectPageSize:function(a){this.numberOfItemsPerPage=a},updateObject:{success:function(a,b,c,d,e){a.load(b);a.resultData=b.data;a.currentSort=c;a.currentDir=d}},getDataFromId:function(a,b){if(!Knowledge.isNull(this.listDefinition.idColumnName))for(var c=0;c<this.data.rows.length;c++)if(this.data.rows[c][this.listDefinition.idColumnName]==a)return this.data.rows[c][b];
return null},getDataFromIds:function(a,b){var c=[],d;if(Knowledge.isNull(this.listDefinition.idColumnName))for(d=0;d<a.length;d++)c.push(null);else for(d=0;d<a.length;d++){for(var e=0;e<this.data.rows.length;e++){var f=this.data.rows[e];f.data.Id==a[d]&&c.push(f[b])}c.push(null)}return c},updateSelectionHeader:function(){var a=this.numberOfItemsInCurrentPage-this.numberOfDisabledItems,b=0;if(0<a)for(var c=0;c<this.data.rows.length;c++){var d=document.getElementById(this.id+"_checkbox_"+c);d&&(!d.disabled&&
d.checked)&&b++}document.getElementById(this.id+"_allCheckbox").checked=0<a&&b==a},_setColumnsInCookie:function(a){for(var b=0;b<this.cols.length;b++)this.cols[b]!=this&&!1===this.cols[b].hidden&&(a.push(this.cols[b].dataIndex),a.push(0))},addItemInSelection:function(a){for(var b=a[this.realIdColumnName],c={},d=0;d<this.colsInSelection.length;d++)c[this.colsInSelection[d]]=a[this.colsInSelection[d]];this.selectedItems.put(b,c)}});
AccessibleObjectList.prototype.selectPage=function(){for(var a=0;a<this.data.rows.length;a++)if(Knowledge.isNull(this.listDefinition.isSelectableColumnName)||this.data.rows[a][this.listDefinition.isSelectableColumnName]){var b=document.getElementById(this.id+"_checkbox_"+a);this.addItemInSelection(this.data.rows[a]);b.checked=!0}};
AccessibleObjectList.prototype.deselectPage=function(){for(var a=0;a<this.data.rows.length;a++)if(Knowledge.isNull(this.listDefinition.isSelectableColumnName)||this.data.rows[a][this.listDefinition.isSelectableColumnName]){var b=document.getElementById(this.id+"_checkbox_"+a);this.selectedItems.remove(this.data.rows[a][this.realIdColumnName]);b.checked=!1}};
AccessibleObjectList.toggleItemInSelection=function(a,b,c){b=ObjectList.instances[b];var d=b.data.rows[c][b.realIdColumnName];a.checked?b.addItemInSelection(b.data.rows[c]):b.selectedItems.remove(d);b.updateSelectionHeader()};AccessibleObjectList.togglePageInSelection=function(a,b){var c=ObjectList.instances[b];a.checked?c.selectPage():c.deselectPage()};
AccessibleObjectList.reloadSort=function(a,b,c){a=ObjectList.instances[a];a.currentSort=b;a.currentDir=c;a.updateCookie(!1,!0,!1);a.reload(b,c,0,0)};AccessibleObjectList.reloadPage=function(a,b){ObjectList.instances[a].reload(null,null,b,0)};AccessibleObjectList.reloadPageSize=function(a,b){var c=ObjectList.instances[a];c.numberOfItemsPerPage=b;c.updateCookie(!0,!1,!1);c.reload(null,null,0,b)};
AccessibleObjectList.callColumnChooser=function(a){a=ObjectList.instances[a];var b=document.getElementsByTagName("body")[0],c=document.createElement("form");c.method="post";c.action=a.accessibleColumnChooserUrl;AccessibleObjectList._addInputHidden(c,"retUrl",a.currentPageUrl);AccessibleObjectList._addInputHidden(c,"motifKey",a.motifKey);AccessibleObjectList._addInputHidden(c,"activeTabName",a.activeTabName);for(var d=a.listDefinition.columnDefinitions,e=[],f=[],h=[],l=[],g=0;g<d.length;g++){var k=
d[g];if(k.visible||k.mandatory)e.push(k.name),f.push(k.label);k.mandatory&&l.push(k.name)}for(g=0;g<a.cols.length;g++)a.cols[g]!=a&&!1===a.cols[g].hidden&&h.push(a.cols[g].coldef.name);AccessibleObjectList._addInputHidden(c,"objectListType",a.listDefinition.type);AccessibleObjectList._addInputHidden(c,"availableNames",e.join(","));AccessibleObjectList._addInputHidden(c,"availableLabels",f.join(","));AccessibleObjectList._addInputHidden(c,"selectedNames",h.join(","));AccessibleObjectList._addInputHidden(c,
"mandatoryNames",l.join(","));b.appendChild(c);c.submit()};AccessibleObjectList._addInputHidden=function(a,b,c){if(a.elements[b])a.elements[b].value=c;else{var d=document.createElement("input");d.type="hidden";d.name=b;d.value=c;a.appendChild(d)}};
Ext.ns("ArticleEdit");ArticleEdit.resizeContentFields=function(){for(var a=Knowledge.getViewportWidth(),b=Ext.query("table[class\x3dstandardContent]"),b=b.concat(Ext.query("table[class\x3dsectionContent]")),c=0;c<b.length;c++)b[c].style.width=1024>a?"650px":"100%"};
Sfdc.on(window,"load",function(){if(window.CKEDITOR)CKEDITOR.on("instanceReady",function(){CKEDITOR.on("dialogDefinition",function(a){var b=a.data.definition;"anchor"==a.data.name&&(a=b.getContents("info"),a.remove("txtName"),a.add({type:"text",id:"txtName",label:editor.lang.link.anchor.name,required:!0,validate:function(){var c=CKEDITOR.dialog.getCurrent().getContentElement("info","anchorErrorMsg").getElement().$,a=this.getInputElement().$;if(!this.getValue())return Sfdc.Dom.updateHTML(c,editor.lang.link.anchor.errorName),
Sfdc.Dom.addClass(a,"elementNotValid"),!1;var b=this.getValue();return b!=b.match(/[a-zA-Z]+[a-zA-Z\d\.\-\_\:]*/)?(Sfdc.Dom.updateHTML(c,LC.getLabel("CkeKnowledgeCustom","invalidCharactersInAnchor")),Sfdc.Dom.addClass(a,"elementNotValid"),!1):!0}}),a.add({type:"html",id:"anchorErrorMsg",className:"errorMsg",html:"\x3cspan\x3e\x3c/span\x3e",onHide:function(){var a=CKEDITOR.dialog.getCurrent(),b=this.getElement().$,a=a.getContentElement("info","txtName").getInputElement().$;Sfdc.Dom.updateHTML(b,"");
Sfdc.Dom.removeClass(a,"elementNotValid")}}))})})});
function ArticleEditToolbar(a){this.init(a)}ArticleEditToolbar.prototype.init=function(a){this.elems=a.elems;this.renderTo=a.renderTo;this.toolbar=new Ext.Toolbar({renderTo:this.renderTo,height:33,cls:"toolbar"});window.sfdcPage.appendToOnloadQueue(function(){Ext.onReady(function(){Ext.QuickTips.init()})});this.addButtons(this.elems);this.doLayout()};ArticleEditToolbar.prototype.render=function(a){this.toolbar.render(a)};ArticleEditToolbar.prototype.clear=function(){this.toolbar.removeAll(!0)};
ArticleEditToolbar.prototype.addButtons=function(a){this.elems=a;for(a=0;a<this.elems.length;a++){var b=this.elems[a];switch(b.type){case "button":this.toolbar.addButton({xtype:"button",id:b.id,text:b.label,disabled:"undefined"!==typeof b.disabled&&""!==b.disabled?b.disabled:!1,handler:b.handler,tooltip:b.tooltip});break;case "separator":this.toolbar.addSeparator();break;case "fill":this.toolbar.addFill()}}};ArticleEditToolbar.prototype.doLayout=function(){this.toolbar.doLayout()};
Ext.override(Ext.Toolbar.Button,{onRender:Ext.Toolbar.Button.prototype.onRender.createSequence(function(){this.el&&this.overCls&&this.el.addClassOnOver(this.overCls)})});
Sfdc.ns("ArticleRenderer");
ArticleRenderer.registerArticleLinksForConsole=function(){function d(b){if("string"===typeof b&&b){var a=b.indexOf("?"),c=b.indexOf("#");if(-1<a&&a<c)return b.substring(0,a);if(-1<c)return b.substring(0,c)}return b}function e(b){var a=Sfdc.Event.getEventTarget(b,"A"),c=Sfdc.Dom.get(a,"href");if(a=!Sfdc.Dom.get(a,"onclick"))a=(a=QueryString.getURI(c))?-1<a.indexOf("/articles/")&&0!==a.indexOf("javascript:"):!1;a&&!(-1<c.indexOf("#")&&d(window.location.href)===d(c))&&(Sfdc.Event.preventDefault(b),srcUp(c))}
if(Sfdc.resolve("Sfdc.servicedeskview"))Sfdc.on(document.body||document.documentElement,"click",e)};
Ext.namespace("Knowledge.ArticleTranslation");
Knowledge.ArticleTranslation=function(b){var a=b.propertiesPanel,c=a.renderTo+":extPanel";this.propertiesPanel=new Ext.Panel({header:!1,collapsible:!0,collapsed:!1,bodyBorder:!1,border:!1,id:c,renderTo:a.renderTo,width:"100%",html:Ext.fly(a.htmlHolder).dom.innerHTML});a=b.toolbar;this.toolbar=new Ext.Toolbar({renderTo:a.renderTo,height:33,cls:"toolbar",items:a.items});this.toolbar.addFill();a=new Ext.Button({id:a.renderTo+":propertiesButton",text:b.toolbar.hidePropertiesLabel,enableToggle:!0,pressed:!0,
toggleHandler:function(){Ext.ComponentMgr.get(c).toggleCollapse(!0)}});a.on("toggle",function(a,c){c?this.setText(b.toolbar.hidePropertiesLabel):this.setText(b.toolbar.showPropertiesLabel)});this.toolbar.addButton(a);this.toolbar.doLayout()};Knowledge.ArticleTranslation.prototype.render=function(){this.toolbar.render()};Knowledge.ArticleTranslation.loadingScreen=null;
Knowledge.ArticleTranslation.showLoadingScreen=function(b,a){Knowledge.ArticleTranslation.loadingScreen||(Knowledge.ArticleTranslation.loadingScreen=new LoadingScreen(Ext.get(b).dom,a,"loadingScreen"));Knowledge.ArticleTranslation.loadingScreen&&Knowledge.ArticleTranslation.loadingScreen.show()};Knowledge.ArticleTranslation.hideLoadingScreen=function(){Knowledge.ArticleTranslation.loadingScreen&&Knowledge.ArticleTranslation.loadingScreen.hide()};
Knowledge.ArticleTranslation.showPreview=function(b,a){var c=window.open(b,a);c&&(focusPreview=function(){c.focus()},window.addEventListener?window.addEventListener("load",focusPreview,!1):window.attachEvent&&window.attachEvent("onload",focusPreview))};
Ext.namespace("Knowledge");Knowledge.BulkAction=function(a){this.init(a)};Knowledge.BulkAction.instances={};Knowledge.BulkAction.getInstance=function(a){a=Knowledge.BulkAction.instances[a];return void 0===a?null:a};
Knowledge.BulkAction.prototype.init=function(a){this.id=a.id;this.objectsToProcess=[];this.processedIndex=0;this.failedObjects=[];this.running=this.doAbort=!1;this.type=a.type;this.assignableObjectType=null;this.action=a.action||null;this.showProgressOverlay=a.showProgressOverlay||!0;this.chunkSize=a.chunkSize||10;this.chunkByKeyPrefix=Knowledge.isNull(a.chunkByKeyPrefix)?!0:a.chunkByKeyPrefix;this.overlayTitle=a.overlayTitle;this.overlayMessageSection=a.overlayMessageSection||"KnowledgePublishingTab";
this.overlayMessageKey=a.overlayMessageKey;this.overlayWidth=a.overlayWidth||300;Knowledge.BulkAction.instances[this.id]=this};
Knowledge.BulkAction.prototype.execute=function(a,b){1>a.length||(b&&(this.action=b),this.chunkNumObjects=this.actionWeight?1>=this.actionWeight?this.chunkSize:this.actionWeight>=this.chunkSize?1:Math.floor(this.chunkSize/this.actionWeight):this.chunkSize,this.showProgressOverlay&&(this.messageKey=this.overlayMessageKey,this.messageSection=this.overlayMessageSection,this.showActionProgressDialog()),this.objectsToProcess=a=a.sort(),this.processedIndex=0,this.failedObjects=[],this.doAbort=!1,this.running=
!0,this.processChunk())};
Knowledge.BulkAction.ActionProgressDialog=Ext.extend(OverlayDialog,{constructor:function(a){Knowledge.BulkAction.ActionProgressDialog.superclass.constructor.call(this);this.id=a.id;this.parentId=a.parentId;this.overlayTitle=a.overlayTitle;this.isModal=!0;this.width=a.overlayWidth;this.maxHeight=300;this.buttons[0]={display:Knowledge.LC.getLabel("Buttons","cancel"),action:null};this.addEvents();this.displayX=!1},createContent:function(){var a=document.getElementById(this.getContentId()),b=[];this.contentTemplate||
(this.contentTemplate=new Ext.Template('\x3cdiv id\x3d"{id}_progressDialogHolder"\x3e','\x3cdiv style\x3d"margin-top: 0px;"\x3e','\x3cdiv class\x3d"hotListElement"\x3e','\x3cdiv class\x3d"pbBody"\x3e',"\x3ctable\x3e","\x3ctr\x3e",'\x3ctd style\x3d"width:30px;text-align:right;"\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/td\x3e\x3ctd style\x3d"width:27px"\x3e\x3cimg class\x3d"progressSpinner" src\x3d"/s.gif" /\x3e\x3c/td\x3e','\x3ctd\x3e\x3cspan id\x3d"{id}_processingTitle" style\x3d"vertical-align:top; font-size:12px; font-weight:bold;text-align:left;"\x3e{overlayTitle}\x3c/span\x3e\x3c/td\x3e',
"\x3c/tr\x3e",'\x3ctr\x3e\x3ctd colspan\x3d"3"\x3e\x3cdiv id\x3d"{id}_processingMsg" style\x3d"margin-top:5px;text-align:center;"\x3e\x26nbsp;\x26nbsp;\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e',"\x3c/table\x3e","\x3c/div\x3e","\x3c/div\x3e","\x3c/div\x3e","\x3c/div\x3e",{compiled:!0,disableFormats:!0}));b.push(this.contentTemplate.apply({id:this.parentId,overlayTitle:this.overlayTitle}));this.overrideButton(0,Knowledge.LC.getLabel("Buttons","cancel"),"Knowledge.BulkAction.instances."+this.parentId+".abortActionProgressDialog()");
this.buttons[0].id=this.parentId+"_cancelButton";this.createButtons(b);a.innerHTML=b.join("")},updateMessage:function(a){document.getElementById(this.parentId+"_processingMsg").innerHTML=a}});Knowledge.BulkAction.prototype.abortActionProgressDialog=function(){return this.doAbort=!0};
Knowledge.BulkAction.prototype.showActionProgressDialog=function(){this.actionProgressDialog||(this.actionProgressDialog=new Knowledge.BulkAction.ActionProgressDialog({id:this.id+"_ActionProgressDialog",parentId:this.id,overlayWidth:this.overlayWidth,overlayTitle:this.overlayTitle}),this.actionProgressDialog.register());this.actionProgressDialog.show();document.getElementById(this.id+"_cancelButton").focus()};Knowledge.BulkAction.prototype.onExecute=function(a,b){};
Knowledge.BulkAction.prototype.onComplete=function(a,b){};
Knowledge.BulkAction.prototype.processChunk=function(a){for(var b=(new Date).getTime(),c=0;1E7>c&&!(1E3<(new Date).getTime()-b);c++);a&&(a.length||(a=Ext.util.JSON.decode(a)),this.failedObjects=this.failedObjects.concat(a));!this.doAbort&&this.processedIndex<this.objectsToProcess.length?(a=Math.min(this.objectsToProcess.length,this.processedIndex+this.chunkNumObjects),a=this.getChunkByKeyPrefix(this.objectsToProcess.slice(this.processedIndex,a)),b=Ext.util.JSON.encode(a),c=this.objectsToProcess.length>
this.chunkNumObjects?Knowledge.LC.getLabel(this.messageSection,this.messageKey,this.processedIndex,this.objectsToProcess.length):"",this.actionProgressDialog.updateMessage(c),this.processedIndex+=a.length,this.onExecute.call(this,b,this.action)):(this.actionProgressDialog&&(document.getElementById(this.id+"_cancelButton").blur(),this.actionProgressDialog.hide()),this.onComplete.call(this,this.processedIndex-this.failedObjects.length,this.failedObjects),this.running=!1)};
Knowledge.BulkAction.prototype.getChunkByKeyPrefix=function(a){var b;if(this.chunkByKeyPrefix&&1<a.length){var c=a[0],e=c.substr(0,3);b=[];b.push(c);for(var d=1;d<a.length;d++)if(c=a[d],e==c.substr(0,3))b.push(c);else break}else b=a;return b};Knowledge.BulkAction.prototype.nextChunk=function(a){this.running&&this.processChunk(a)};
Ext.namespace("CaseArticle");
CaseArticle.AttachBulkAction=Ext.extend(Knowledge.BulkAction,{executeAttachToCase:function(b,a,c){this.caseId=a;this.languageId=c;this.execute(b,"AttachToCase")},executeAttachToAndGoToCase:function(b,a,c,d){this.caseId=a;this.languageId=c;this.relativeUrlForCase=d;this.execute(b,"AttachToAndGoToCase")},onExecute:function(b,a){caseArticleBulkAction(b,"Attach",this.caseId,this.languageId)},onComplete:function(b,a){if(window.parent.onArticleLinkedToCase)window.parent.onArticleLinkedToCase(this.caseId);else if(window.opener&&
window.opener.onArticleLinkedToCase)window.opener.onArticleLinkedToCase(this.caseId);CaseArticle.attachDone();"AttachToCase"===this.action?runSearch():(CaseArticle.attachDoneAndGotoCase(),window.opener&&window.opener.location.pathname==this.relativeUrlForCase?self.close():navigateToUrl(this.relativeUrlForCase))}});
CaseArticle.action=function(b,a,c){document.getElementById("Action_"+a).parentNode.innerHTML="\x3cspan id\x3d'Action_"+a+"'\x3e"+caseArticleLoadingMessage+"\x3c/span\x3e";caseArticleAction(b,a,c)};
CaseArticle.changeAction=function(b,a,c){var d=document.getElementById("Action_"+a).parentNode;a="\x3ca id\x3d'Action_"+a+"' href\x3d'' onclick\x3d\"CaseArticle.action('"+b+"', '"+a+"', '"+c+"');return false;\"\x3e";"Attach"==b?a+=caseArticleAttachMessage:"Detach"==b&&(a+=caseArticleDetachMessage);d.innerHTML=a+"\x3c/a\x3e"};
CaseArticle.attachSelectedArticles=function(){var b=ObjectList.instances.caseArticleList,a=b.getSelectedItemIds();Knowledge.BulkAction.instances.caseArticle.executeAttachToCase(a,b.listDefinition.contextData.caseId,b.resultData.languageId)};
CaseArticle.attachSelectedArticlesGoToCase=function(b,a){var c=ObjectList.instances.caseArticleList,d=c.getSelectedItemIds();b=c.listDefinition.contextData.caseId;Knowledge.BulkAction.instances.caseArticle.executeAttachToAndGoToCase(d,b,c.resultData.languageId,a)};CaseArticle.attachDone=function(){};CaseArticle.attachDoneAndGotoCase=function(){};
Ext.namespace("Knowledge");Knowledge.constants={};Knowledge.addConstant=function(a,b){Knowledge.constants[a]=b};Knowledge.getConstant=function(a){return Knowledge.constants[a]};
Ext.namespace("Knowledge");Knowledge.Hover=function(a){this.init(a);this.createHover();Knowledge.Hover.instances[this.id]=this};Knowledge.Hover.instances={};Knowledge.Hover.getInstance=function(a){a=Knowledge.Hover.instances[a];return void 0===a?null:a};Knowledge.Hover.prototype.init=function(a){this.id=a.id;this.loadingMessage=a.loadingMessage;this.afterUpdate=a.afterUpdate;this.afterUpdateConfig=a.afterUpdateConfig;this.contextId=null};
Knowledge.Hover.createOrGet=function(a){var b=Knowledge.Hover.getInstance(a.id);null===b?b=new Knowledge.Hover(a):b.init(a);return b};
Knowledge.Hover.show=function(a,b,c,f,g,h){var d=Knowledge.Hover.getInstance(a);if("hover"==d.div.className&&d.anchorId==b)d.keepVisible();else{d.hideTimeout&&(window.clearTimeout(d.hideTimeout),d.hideNow(),d.hideTimeout=null);d.showTimeout&&window.clearTimeout(d.showTimeout);var e="",e=null===c?e+", null":e+(", '"+c+"'");void 0!==g&&(void 0!==f&&(e+=", "+f),e+=", '"+g+"'",void 0!==h&&(e+=", "+Ext.encode(h)));d.showTimeout=window.setTimeout("Knowledge.Hover.getInstance('"+a+"').showNow('"+b+"'"+e+
")",500)}};
Knowledge.Hover.prototype.showNow=function(a,b,c,f,g){this.div.className="hover";this.showTimeout=null;this.anchorId=a;this.contextId=b;!0===c?(this.updateInnerHTML("","hoverContentLoading"),this.updatePos(),a=document.getElementById(this.id+"_hoverContent"),this.loadingScreen=new LoadingScreen(a,this.loadingMessage,this.id+"_loadingScreen"),this.loadingScreen.show(),Sfdc.userAgent.isIE7&&(a=new Ext.Element(this.loadingScreen.opaqueElement),b=new Ext.Element(this.loadingScreen.loadingDescrElement),c=
a.getXY(),c[0]+=(a.getWidth()-b.getWidth())/2,c[1]+=(a.getHeight()-b.getHeight())/2,b.setXY(c)),window[f].apply(this,g)):!1===c&&(this.updateInnerHTML("",""),this.updatePos(),window[f].apply(this,g))};Knowledge.Hover.hide=function(a){var b=Knowledge.Hover.getInstance(a);b.showTimeout&&(window.clearTimeout(b.showTimeout),b.showTimeout=null);b.hideTimeout&&window.clearTimeout(b.hideTimeout);b.hideTimeout=window.setTimeout("Knowledge.Hover.getInstance('"+a+"').hideNow()",300)};
Knowledge.Hover.prototype.hideNow=function(){var a=document.getElementById(this.id+"_hoverContent");"hoverContentLoading"==a.className&&(this.loadingScreen&&this.loadingScreen.hide(),a.className="hoverContent");this.updateInnerHTML("","");this.updatePos();this.div.className="hoverHidden";this.hideTimeout=null};Knowledge.Hover.prototype.keepVisible=function(){this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null)};
Knowledge.Hover.prototype.createHover=function(){this.div=document.createElement("div");this.div.className="hoverHidden";this.div.id="Knowledge.Hover:"+this.id;Sfdc.userAgent.isIE?(this.div.onmouseover=function(){var a=this.id.substring(16);Knowledge.Hover.getInstance(a).keepVisible()},this.div.onmouseout=function(){var a=this.id.substring(16);Knowledge.Hover.hide(a)}):(this.div.setAttribute("onmouseover","Knowledge.Hover.getInstance('"+this.id+"').keepVisible();"),this.div.setAttribute("onmouseout",
"Knowledge.Hover.hide('"+this.id+"');"));document.body.appendChild(this.div)};
Knowledge.Hover.prototype.updateContent=function(a){if(!(null!==this.contextId&&this.contextId!=a)){a=document.getElementById(this.id+"_hoverContent");null!==a&&"hoverContentLoading"==a.className&&(this.loadingScreen.hide(),a.className="hoverContent");a=document.getElementById(this.id+"_content");var b=a.innerHTML;a.innerHTML="";this.updateInnerHTML(b,"");0<this.afterUpdate.length&&window[this.afterUpdate].apply(this,[this.afterUpdateConfig]);this.updatePos()}};
Knowledge.Hover.prototype.updateInnerHTML=function(a,b){var c=[];c.push("\x3cdiv class\x3d'top-arrow'\x3e\x3c/div\x3e");c.push("\x3ctable\x3e\x3ctr\x3e\x3ctd class\x3d'top-left'\x3e\x3c/td\x3e\x3ctd id\x3d'"+this.id+"_topArrow' class\x3d'top-central'\x3e\x3c/td\x3e\x3ctd class\x3d'top-arrow'\x3e\x3c/td\x3e\x3ctd class\x3d'top-right'\x3e\x3c/td\x3e\x3c/tr\x3e");c.push("\x3ctr\x3e\x3ctd class\x3d'middle-left'\x3e\x3c/td\x3e\x3ctd class\x3d'middle-central' colspan\x3d'2'\x3e\x3cdiv id\x3d'"+this.id+
"_hoverContent' class\x3d'"+b+"'\x3e");c.push(a);c.push("\x3c/div\x3e\x3c/td\x3e\x3ctd class\x3d'middle-right'\x3e\x3c/td\x3e\x3c/tr\x3e");c.push("\x3ctr\x3e\x3ctd class\x3d'bottom-left'\x3e\x3c/td\x3e\x3ctd class\x3d'bottom-central' colspan\x3d'2'\x3e\x3c/td\x3e\x3ctd class\x3d'bottom-right'\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e");this.div.innerHTML=c.join("")};
Knowledge.Hover.prototype.updatePos=function(){if("hover"==this.div.className){var a=new Ext.Element(this.div),b=new Ext.Element(document.getElementById(this.anchorId)),c=b.getXY();c[1]+=b.getHeight();c[0]+=b.getWidth()-a.getWidth()+35;a.setXY(c);this.updateTopBar()}};Knowledge.Hover.prototype.updateTopBar=function(){var a=new Ext.Element(document.getElementById(this.id+"_hoverContent"));(new Ext.Element(document.getElementById(this.id+"_topArrow"))).setWidth(a.getWidth()-35)};
function checkImportButtonOnLanguageChange(b,a,c){a=document.getElementById(a);if(0!==b)return""!==document.getElementById(c).getElementsByTagName("input")[0].value?(a.removeAttribute("disabled"),a.setAttribute("class","btn")):(a.setAttribute("disabled","disabled"),a.setAttribute("class","btnDisabled")),!0;a.setAttribute("disabled","disabled");a.setAttribute("class","btnDisabled");return!1}
function checkImportButtonOnFileChange(b,a,c){a=document.getElementById(a);if(""!==b)return"0"!=document.getElementById(c).value?(a.removeAttribute("disabled"),a.setAttribute("class","btn")):(a.setAttribute("disabled","disabled"),a.setAttribute("class","btnDisabled")),!0;a.setAttribute("disabled","disabled");a.setAttribute("class","btnDisabled");return!1};
Ext.namespace("Knowledge");var articletooltip;function articleToolTip(a,c){articletooltip&&articletooltip.hide();articletooltip=new Ext.ToolTip({target:a,title:c,showDelay:1,dismissDelay:0,trackMouse:!0,baseCls:"articletooltip",style:"z-index: 50102"})}Knowledge.hide=function(a){Knowledge._getElement(a).style.display="none"};Knowledge.showBlock=function(a){Knowledge._getElement(a).style.display="block"};
Knowledge.toggleBlock=function(a,c){var b=Knowledge._getElement(a),d=Knowledge._getElement(c);Knowledge.hide(b);Knowledge.showBlock(d)};Knowledge._getElement=function(a){return"string"==typeof a?document.getElementById(a):a};
Knowledge.getViewportWidth=function(){var a=0;return a="undefined"!=typeof window.innerWidth?window.innerWidth:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?document.documentElement.clientWidth:document.getElementsByTagName("body")[0].clientWidth};Knowledge.isNull=function(a){return null===a||void 0===a};
Knowledge.getFunction=function(a,c){for(var b=Knowledge.isNull(c)?window:c,d=a.split("."),e=0;e<d.length;e++)b=b[d[e]];return b};Knowledge.call=function(a,c){if("string"===typeof a){var b=a.charAt(0);if("["===b||"{"===b)a=Ext.decode(a)}"string"===typeof a?(b=Knowledge.getFunction(a),b.call(c)):Ext.isArray(a)?(b=Knowledge.getFunction(a.shift()),b.apply(c,a)):(b=Knowledge.getFunction(a.fn),void 0===a.args?b.call(c):b.apply(c,a.args))};
Ext.ns("KnowledgeCKEditor");KnowledgeCKEditor.getLabelSmartLinkButtonTooltip=function(){return LC.getLabel("KnowledgeCKEditor","SmartLinkButtonTooltip")};KnowledgeCKEditor.getLabelSmartLinkContextMenuEdit=function(){return LC.getLabel("KnowledgeCKEditor","SmartLinkContextMenuEdit")};KnowledgeCKEditor.getLabelSmartLinkDialogTitle=function(){return LC.getLabel("KnowledgeCKEditor","SmartLinkDialogTitle")};
KnowledgeCKEditor.getLabelSmartLinkSearchArticle=function(){return LC.getLabel("KnowledgeCKEditor","SmartLinkSearchArticle")};KnowledgeCKEditor.getLabelSmartLinkSelectedArticle=function(){return LC.getLabel("KnowledgeCKEditor","SmartLinkSelectedArticle")};KnowledgeCKEditor.getLabelSmartLinkNoArticleSelected=function(){return LC.getLabel("KnowledgeCKEditor","SmartLinkNoArticleSelected")};KnowledgeCKEditor.getLabelSmartLinkSearchResultsDefault=function(){return LC.getLabel("KnowledgeCKEditor","SmartLinkSearchResultsDefault")};
KnowledgeCKEditor.getLabelGoToArticle=function(){return LC.getLabel("KnowledgeCKEditor","SmartLinkGoToArticle")};KnowledgeCKEditor.getLabelNoResults=function(){return LC.getLabel("KnowledgeCKEditor","SmartLinkNoResults")};KnowledgeCKEditor.getLabelSmartLinkKeywordTooShort=function(){return LC.getLabel("KnowledgeCKEditor","SmartLinkKeywordTooShort")};
Ext.namespace("KnowledgeDatePicker");KnowledgeDatePicker.showAsRequired=function(a,c){var b=document.getElementById(a+"_required");b&&(b.style.backgroundColor=c?"#C00":"transparent")};KnowledgeDatePicker.hasValidDate=function(a){a=document.getElementById(a).value;return DateUtil.isDate(a,UserContext.dateFormat)};KnowledgeDatePicker.getDateAsString=function(a){return document.getElementById(a).value};KnowledgeDatePicker.isEmpty=function(a){return 0<document.getElementById(a).value.length?!1:!0};
KnowledgeDatePicker.showDatePicker=function(a,c){DatePicker.pickDate(!1,c,!1);DatePicker.datePicker.cancelHide(a);var b=Ext.get(c),d=b.getXY();d[1]+=b.getHeight();Ext.get(DatePickerIds.DOM_ID).setXY(d);Sfdc.userAgent.isIE6&&(DatePicker.datePicker.monthPicker.style.visibility="visible",DatePicker.datePicker.yearPicker.style.visibility="visible")};
KnowledgeDatePicker.validate=function(a){if(!KnowledgeDatePicker.isEmpty(a)&&!KnowledgeDatePicker.hasValidDate(a))return KnowledgeDatePicker.setError(a,Knowledge.LC.getLabel("Edit","InvalidDate")),!1;KnowledgeDatePicker.cleanError(a);return!0};
KnowledgeDatePicker.setError=function(a,c){KnowledgeDatePicker.cleanError(a);document.getElementById(a).setAttribute("class","error");var b=document.createElement("div");b.id=a+"_errorMessage";b.setAttribute("class","errorMsg");var d=document.createElement("strong");d.innerHTML=Knowledge.LC.getLabel("Global","labelWithColon",Knowledge.LC.getLabel("Global","error"));b.appendChild(d);b.appendChild(document.createTextNode(" "+c));document.getElementById(a).parentNode.appendChild(b)};
KnowledgeDatePicker.cleanError=function(a){document.getElementById(a).removeAttribute("class");(a=document.getElementById(a+"_errorMessage"))&&a.parentNode.removeChild(a)};KnowledgeDatePicker.toggleDisplay=function(a){a=document.getElementById(a);var c=Ext.query("img[class*\x3ddatePickerIcon]",a.parentNode),b=0<c.length?!1:!0;!0===a.disabled?(a.disabled=!1,!1===b&&(c[0].style.visibility="inherit")):(a.disabled=!0,!1===b&&(c[0].style.visibility="hidden"))};
Ext.namespace("Knowledge","Knowledge.Dialog");Knowledge.Dialog.ACTION_TYPE_SUBMIT="submit";Knowledge.Dialog.ACTION_TYPE_CANCEL="cancel";Knowledge.Dialog.ACTION_TYPE_CLOSE="close";Knowledge.Dialog.instances=[];
Knowledge.Dialog.getInstance=function(a){Knowledge.Dialog.instances[a.componentId]||(!0===a.accessibleMode?Knowledge.Dialog.instances[a.componentId]=new Knowledge.AccessibleDialog(a):(Knowledge.Dialog.instances[a.componentId]=new Knowledge.OverlayDialog(a),Knowledge.Dialog.instances[a.componentId].register()));return Knowledge.Dialog.instances[a.componentId]};
Knowledge.Dialog.retrieveContentContainerId=function(a){return(a=Ext.query("div[id$\x3d_dialogContent]",a+"_dialogHolder"))&&0<a.length?a[0].id:null};Knowledge.Dialog.retrieveActionContainerId=function(a){return(a=Ext.query("div[id$\x3d_dialogActions]",a+"_dialogHolder"))&&0<a.length?a[0].id:null};Knowledge.Dialog.retrieveEventContainerId=function(a){return(a=Ext.query("div[id$\x3d_dialogEvents]",a+"_dialogHolder"))&&0<a.length?a[0].id:null};
Knowledge.Dialog.retrieveScriptContainerId=function(a){return(a=Ext.query("div[id$\x3d_dialogScript]",a+"_dialogHolder"))&&0<a.length?a[0].id:null};Knowledge.Dialog.getActionAttribute=function(a,b){var c=Ext.query("input[type\x3dhidden][class\x3ddialogAction-"+b+"]",a);return c&&0<c.length?c[0].value:null};Knowledge.Dialog.getEventAttribute=function(a,b){var c=Ext.query("input[type\x3dhidden][class\x3ddialogEvent-"+b+"]",a);return c&&0<c.length?c[0].value:null};
Knowledge.Dialog.loadActionDefinitions=function(a){var b=[];a=Ext.query("div[class\x3ddialogAction]",a);for(var c=0;c<a.length;c++){var d=a[c].id;b[c]={id:Knowledge.Dialog.getActionAttribute(d,"name"),label:Knowledge.Dialog.getActionAttribute(d,"label"),type:Knowledge.Dialog.getActionAttribute(d,"type"),handler:Knowledge.Dialog.getActionAttribute(d,"handler")}}return b};
Knowledge.Dialog.loadEventDefinitions=function(a){var b=[];a=Ext.query("div[class\x3ddialogEvent]",a);for(var c=0;c<a.length;c++){var d=a[c].id,e=Knowledge.Dialog.getEventAttribute(d,"eventName"),d=Knowledge.Dialog.getEventAttribute(d,"callbackName");b[e]=d}return b};Knowledge.Dialog.isAccessibleMode=function(){return"undefined"!=typeof window.opener&&"undefined"!=typeof window.manager};
Knowledge.Dialog.getAjaxRefreshedElementById=function(a){return Knowledge.Dialog.isAccessibleMode()?window.opener.document.getElementById(a):document.getElementById(a)};
Knowledge.Dialog.invokeActionFunction=function(a){if(Knowledge.Dialog.isAccessibleMode()){if("undefined"!=typeof a&&"function"===typeof window.opener[a])return window.opener[a]();alert("ERROR: window.opener."+a+" is not a valid action function name")}else{if("undefined"!=typeof a&&"function"===typeof window[a])return window[a]();alert("ERROR: "+a+" is not a valid action function name")}};
Knowledge.AccessibleDialog=function(a){this.title=a.title;this.componentId=a.componentId;this.initializerName=a.initializerName;this.validatorName=a.validatorName;this.encoderName=a.encoderName;this.returnsResult=a.returnsResult;this.width=a.width;this.height=a.height;this.refreshedDataEl=a.refreshedDataEl;this.callbackContext="window.opener.";this._actionsContainerId=Knowledge.Dialog.retrieveActionContainerId(this.componentId);this._eventsContainerId=Knowledge.Dialog.retrieveEventContainerId(this.componentId);
this._contentContainerId=Knowledge.Dialog.retrieveContentContainerId(this.componentId);(this._scriptContainerId=Knowledge.Dialog.retrieveScriptContainerId(this.componentId))&&this.loadScript();this.loadContent();this.loadActionDefinitions();this._eventsContainerId&&this.loadEventDefinitions();this.validateConfig()};Knowledge.AccessibleDialog.prototype.loadContent=function(){this.dlgContent=document.getElementById(this._contentContainerId).innerHTML};
Knowledge.AccessibleDialog.prototype.loadActionDefinitions=function(){this.actions=Knowledge.Dialog.loadActionDefinitions(this._actionsContainerId)};Knowledge.AccessibleDialog.prototype.loadEventDefinitions=function(){this.events=Knowledge.Dialog.loadEventDefinitions(this._eventsContainerId)};Knowledge.AccessibleDialog.prototype.loadScript=function(){var a=Ext.query("script",this._scriptContainerId);this.script="";a&&0<a.length&&(this.script=a[0].innerHTML)};
Knowledge.AccessibleDialog.prototype.show=function(){this.popup=window.open("/knowledge/AccessibleDialog/dialogTemplate.apexp",this.componentId,"location\x3dno,resizable\x3dyes,scrollbars\x3dno,toolbar\x3dno,height\x3d"+this.height+",width\x3d"+this.width);this.document=this.popup.document;this.popup.manager=this;this.popup.focus()};Knowledge.AccessibleDialog.prototype.hasScript=function(){return"undefined"!==typeof this.script&&""!==this.script};Knowledge.AccessibleDialog.prototype.getScript=function(){return this.script};
Knowledge.AccessibleDialog.prototype.createContent=function(){var a=[];if(this.refreshedDataEl){var b=document.getElementById(this.refreshedDataEl);a.push('\x3cdiv style\x3d"display:none"\x3e');a.push(b.innerHTML);a.push("\x3c/div\x3e")}a.push(this.dlgContent);a.push(this.createButtons());return a.join("")};
Knowledge.AccessibleDialog.prototype.buildActionScript=function(a){a=this.actions[a];var b=[];if(!a)return"";switch(a.type){case Knowledge.Dialog.ACTION_TYPE_SUBMIT:null!==this.validatorName&&b.push("if("+("true"!=this.validatorName?this.validatorName+"()":"true")+") {");!0===this.returnsResult?(b.push("var result \x3d "+this.encoderName+"(); "),b.push(this.callbackContext+a.handler+"(result); ")):b.push(this.callbackContext+a.handler+"(); ");b.push("window.close();");null!==this.validatorName&&b.push("}");
break;case Knowledge.Dialog.ACTION_TYPE_CANCEL:a.handler&&b.push(this.callbackContext+a.handler+"();");b.push("window.close();");break;case Knowledge.Dialog.ACTION_TYPE_CLOSE:b.push("window.close();");break;default:alert('"'+a.type+'" is not a valid action type')}return b.join("")};
Knowledge.AccessibleDialog.prototype.createButtons=function(){for(var a=[],b=0;b<this.actions.length;b++)a.push('\x3cinput type\x3d"button" '),a.push('id\x3d"'+this.actions[b].id+'" '),a.push('value\x3d"'+this.actions[b].label+'" '),a.push('onclick\x3d"'+this.buildActionScript(b)+'" '),a.push(" /\x3e");return a.join("")};
Knowledge.AccessibleDialog.prototype.validateConfig=function(){if(this.returnsResult&&Ext.isEmpty(this.encoderName))return alert("Missing encoder function. As this dialog returns a result a valid encoder should be specified"),!1;if(null!==this.encoderName&&(!Ext.isDefined(this.encoderName)||!Ext.isFunction(window[this.encoderName])))return alert("ERROR: Encoder function ("+this.encoderName+") is not valid"),!1;if(null!==this.initializerName&&(!Ext.isDefined(this.initializerName)||!Ext.isFunction(window[this.initializerName])))return alert("ERROR: Initializer function ("+
this.initializerName+") is not valid"),!1;if(null!==this.validatorName&&(!Ext.isDefined(this.validatorName)||!Ext.isFunction(window[this.validatorName])))return alert("ERROR: Validator function ("+this.validatorName+") is not valid"),!1;if(null!==this.actions&&0<this.actions.length)for(var a=0;a<this.actions.length;a++){var b=this.actions[a].handler;if(this.actions[a].type===Knowledge.Dialog.ACTION_TYPE_SUBMIT&&Ext.isEmpty(b))return alert('ERROR: Missing mandatory action handler for submit action "'+
this.actions[a].label+'"'),!1;if(!Ext.isEmpty(b)&&!Ext.isFunction(Knowledge.getFunction(b)))return alert("ERROR: Handler function ("+b+') for action "'+this.actions[a].label+'" is not valid'),!1}if(!Ext.isEmpty(this.events))for(a=0;a<this.events.length;a++){b=this.events[a].eventName;if(Ext.isEmpty(b))return alert('ERROR: Missing mandatory callback function for event "'+this.events[a].eventName+'"'),!1;if(b&&(!Ext.isDefined(b)||!Ext.isFunction(window[b])))return alert("ERROR: Callback function ("+
b+') for event "'+this.events[a].eventName+'" is not valid'),!1}return!0};Knowledge.AccessibleDialog.prototype.fireEvent=function(a){a=this.events[a];"undefined"!=typeof a&&(Ext.isIE?this.popup[a].apply(this.popup):Ext.invoke([this.popup],a))};
Knowledge.OverlayDialog=Ext.extend(OverlayDialog,{constructor:function(a){Knowledge.OverlayDialog.superclass.constructor.call(this);this.id=a.id;this.componentId=a.componentId;this.returnsResult=a.returnsResult;this.width=a.width;this.maxHeight=a.height;this.title=a.title;this.initializerName=a.initializerName;this.validatorName=a.validatorName;this.encoderName=a.encoderName;this.refreshedDataEl=a.refreshedDataEl;this.callbackContext="";this.setupDefaultButtons();this.addEvents();this._actionsContainerId=
Knowledge.Dialog.retrieveActionContainerId(this.componentId);this._eventsContainerId=Knowledge.Dialog.retrieveEventContainerId(this.componentId);this._contentContainerId=Knowledge.Dialog.retrieveContentContainerId(this.componentId);this.loadActionDefinitions();this._eventsContainerId&&this.loadEventDefinitions();this.validateConfig()},show:function(){if(null!==this.initializerName)window[this.initializerName]();Knowledge.OverlayDialog.superclass.show.call(this)},createButtons:function(a){a.push("\x3cdiv id\x3d'"+
this.id+"_buttons' class\x3d'buttons'\x3e");for(var b=0;b<this.actions.length;b++)a.push('\x3cinput type\x3d"button" '),a.push('id\x3d"'+this.actions[b].id+'" '),a.push('class\x3d"btn" '),a.push('value\x3d"'+this.actions[b].label+'" '),a.push('onclick\x3d"'+this.buildActionScript(b)+'" '),a.push(" /\x3e");a.push("\x3c/div\x3e")},createContent:function(){var a=document.getElementById(this.getContentId()),b=document.getElementById(this._contentContainerId),c=[];c.push(b.innerHTML);b.innerHTML="";this.createButtons(c);
a.innerHTML=c.join("");if(Sfdc.userAgent.isIE&&!document.getElementById("simpleDialog_datePicker_holder")&&(a=document.getElementById(DatePickerIds.DOM_ID)))b=document.createElement("div"),b.id="simpleDialog_datePicker_holder",b.appendChild(a.cloneNode(!0)),a.parentNode.removeChild(a),document.body.appendChild(b)},scrollEvent:function(){}});
Knowledge.OverlayDialog.prototype.validateConfig=function(){if(this.returnsResult&&Ext.isEmpty(this.encoderName))return alert("Missing encoder function. As this dialog returns a result a valid encoder should be specified"),!1;if(null!==this.encoderName&&(!Ext.isDefined(this.encoderName)||!Ext.isFunction(window[this.encoderName])))return alert("ERROR: Encoder function ("+this.encoderName+") is not valid"),!1;if(null!==this.initializerName&&(!Ext.isDefined(this.initializerName)||!Ext.isFunction(window[this.initializerName])))return alert("ERROR: Initializer function ("+
this.initializerName+") is not valid"),!1;if(null!==this.validatorName&&(!Ext.isDefined(this.validatorName)||!Ext.isFunction(window[this.validatorName])))return alert("ERROR: Validator function ("+this.validatorName+") is not valid"),!1;if(null!==this.actions&&0<this.actions.length)for(var a=0;a<this.actions.length;a++){var b=this.actions[a].handler;if(this.actions[a].type===Knowledge.Dialog.ACTION_TYPE_SUBMIT&&Ext.isEmpty(b))return alert('ERROR: Missing mandatory action handler for submit action "'+
this.actions[a].label+'"'),!1;if(!Ext.isEmpty(b)&&!Ext.isFunction(Knowledge.getFunction(b)))return alert("ERROR: Handler function ("+b+') for action "'+this.actions[a].label+'" is not valid'),!1}if(!Ext.isEmpty(this.events))for(a=0;a<this.events.length;a++)if(b=this.events[a].eventName,Ext.isEmpty(b)&&alert('ERROR: Missing mandatory callback function for event "'+this.events[a].eventName+'"'),b&&(!Ext.isDefined(b)||!Ext.isFunction(window[b])))return alert("ERROR: Callback function ("+b+') for event "'+
this.events[a].eventName+'" is not valid'),!1;return!0};Knowledge.OverlayDialog.prototype.loadActionDefinitions=function(){this.actions=Knowledge.Dialog.loadActionDefinitions(this._actionsContainerId)};Knowledge.OverlayDialog.prototype.loadEventDefinitions=function(){this.events=Knowledge.Dialog.loadEventDefinitions(this._eventsContainerId)};
Knowledge.OverlayDialog.prototype.buildActionScript=function(a){a=this.actions[a];var b=[];if(!a)return"";switch(a.type){case Knowledge.Dialog.ACTION_TYPE_SUBMIT:null!==this.validatorName&&b.push("if("+("true"!=this.validatorName?this.validatorName+"()":"true")+") {");b.push("sfdcPage.getDialogById('"+this.id+"').hide();");!0===this.returnsResult?(b.push("var result \x3d "+this.encoderName+"(); "),b.push(a.handler+"(result); ")):b.push(a.handler+"(); ");null!==this.validatorName&&b.push("}");break;
case Knowledge.Dialog.ACTION_TYPE_CANCEL:b.push("sfdcPage.getDialogById('"+this.id+"').hide();");a.handler&&b.push(a.handler+"();");break;case Knowledge.Dialog.ACTION_TYPE_CLOSE:b.push("sfdcPage.getDialogById('"+this.id+"').hide();");break;default:alert('"'+a.type+'" is not a valid action type')}return b.join("")};Knowledge.OverlayDialog.prototype.fireEvent=function(a){a=this.events[a];if("undefined"!=typeof a)window[a]()};
var articleListName="articleList",colRightsName="ActionRights",actionRights={archiveRight:"a",assignRight:"g",deleteRight:"d",publishRight:"p",submitForTranslationRight:"s"};
function setViewGroup(a,b){var d=viewTab.viewGroups[a],c=viewGroup,f=null,g=null,e=null;c.id!=d.id&&(c.containsAssignees&&(e=document.getElementById(c.id+"_Assignees"),e.setAttribute("disabled","disabled")),d.containsAssignees?(e=document.getElementById(d.id+"_Assignees"),e.removeAttribute("disabled"),c=e.options[e.selectedIndex].value.split(";"),f=c[0],1<c.length&&(null!==c[1]&&""!==c[1])&&(g=c[1])):f=d.views[0].id);viewGroup=d;viewChange(f,g)}
function setView(a){a=document.getElementById(a+"_Assignees");a=a.options[a.selectedIndex].value.split(";");var b=a[0],d=null;1<a.length&&(null!==a[1]&&""!==a[1])&&(d=a[1]);viewChange(b,d)}function doViewTabChange(a){showLoadingScreen();viewTabChange(a)}function showWarningMsg(a,b){a.style.display="";for(var d=Ext.query("div[class\x3dmessageText]",a)[0],c=0;c<d.childNodes.length;c++)if(3==d.childNodes[c].nodeType){d.childNodes[c].nodeValue=b;break}}
function hideWarningMsg(a){a.style.display="none"}function hoverWidthProcess(){Knowledge.getFunction("Knowledge.Hover.prototype.updatePos").call(this.hover)}
function setupTabs(a){var b=null,d=null,c=0;"draft"==a.status?(b="translationsTabPanel",d="draft"):"published"==a.status&&(b="publishedTranslationsTabPanel",d="published",0<a.draftNumber&&0<a.publishedNumber&&(c=1));KnowledgeTabPanel.instances[b]&&(KnowledgeTabPanel.instances[b].extTabs.destroy(),KnowledgeTabPanel.instances[b]=null);(new KnowledgeTabPanel({id:b,width:"100%",cls:"",onChange:"hoverWidthProcess",defaultTab:c})).hover=this;0<a.draftNumber&&KnowledgeTabPanel.instances[b].addTab(Knowledge.LC.getLabel("KnowledgePublishingTab",
"DraftTab",a.draftNumber),d+"DraftTranslations:content");0<a.publishedNumber&&KnowledgeTabPanel.instances[b].addTab(Knowledge.LC.getLabel("KnowledgePublishingTab","PublishedTab",a.publishedNumber),d+"OnlineTranslations:content");KnowledgeTabPanel.instances[b].render()}function canUserDelete(a){return 0<=a[colRightsName].indexOf(actionRights.deleteRight)}function canUserCreateTranslations(a){return 0<=a[colRightsName].indexOf(actionRights.submitForTranslationRight)}
function canUserArchive(a){return 0<=a[colRightsName].indexOf(actionRights.archiveRight)}function canUserEdit(a){return 0<=a[colRightsName].indexOf(actionRights.assignRight)}function canUserPublish(a){return 0<=a[colRightsName].indexOf(actionRights.publishRight)}
function updateCookie(a,b,d,c,f){var g=document.getElementById(b);b=[];b.push("178");if(null!==g){var e=g.selectedIndex;0>e?b.push(g.options[0].value):b.push(g.options[e].value)}else b.push("");(e=document.getElementById(c))?(e=e.value.trim().replace(/@/g,"%40"),b.push(e)):b.push("");f=document.getElementById(f);null!==f?(e=f.selectedIndex,0>e?b.push(f.options[0].value):b.push(f.options[e].value)):b.push("");f=document.forms[Knowledge.getConstant("formId")].elements;for(c=0;c<f.length;c++)g=f[c],
"SELECT"==g.nodeName&&0==g.id.indexOf(d)&&(e=g.selectedIndex,0<=e&&b.push(g.id.substring(d.length)+":"+g.options[e].value));d=new Date;Sfdc.Cookie.setCookie(a+"_KMPage",b.join("@"),new Date(d.getTime()+31536E6),"/knowledge/publishing",null,null)};
Ext.namespace("KnowledgeSettings");KnowledgeSettings.initLabels=function(){};
KnowledgeSettings.onClickFeaturePref=function(a){a=Ext.get(a);var c=a.findParent(".detailList",10,!0),b=c.query("div[class\x3drequiredBlock]"),d=c.query("span[class\x3dlookupInput] a"),c=c.query("input:not([id^\x3denable]), select");KnowledgeSettings.onClickPrefHelper(b,d,c,a.dom.checked);"enableKnowledgeAgentContribution"==a.id&&a.dom.checked&&KnowledgeSettings.editorOnClick();"enableKnowledge2"==a.id&&(a.dom.checked?Ext.get("textInfoForLightningKnowledge").dom.style.display="block":Ext.get("textInfoForLightningKnowledge").dom.style.display=
"none")};KnowledgeSettings.onClickPrefHelper=function(a,c,b,d){for(var f=d?"visible":"hidden",e=0;e<a.length;e++)Ext.fly(a[e]).applyStyles({visibility:f});for(e=0;e<c.length;e++)Ext.fly(c[e]).applyStyles({visibility:f});for(e=0;e<b.length;e++)Ext.fly(b[e]).dom.disabled=!d};
KnowledgeSettings.editorOnClick=function(){var a=Ext.get("standardEditor0");if(!a.dom.disabled){var c=a.findParent(".detailList",10,!0),b=c.query("input[id*\x3dcloseCaseOwnerId]"),d=c.query("div[class\x3drequiredBlock]:next(input[id*\x3dcloseCaseOwnerId])"),f=c.query("span[class\x3dlookupInput] a[id*\x3dcloseCaseOwnerId]");KnowledgeSettings.onClickPrefHelper(d,f,b,a.dom.checked);KnowledgeSettings.adjustErrorMessages(c,a.dom.checked)}};
KnowledgeSettings.adjustErrorMessages=function(a,c){var b=a.query("div.errorMsg:prev(span.lookupInput:has(input[id*\x3dcloseCaseOwnerId]))"),d=c?"block":"none";for(i=0;i<b.length;i++)Ext.fly(b[i]).setStyle("display",d);b=a.query("div.requiredInput select, div.requiredInput input");for(i=0;i<b.length;i++)Ext.fly(b[i]).removeClass("error")};KnowledgeSettings.onClickSingleLanguage=function(){Ext.get("switchToMultilingual").dom.style.display="none";Ext.get("langConfigContainer").dom.style.display="none"};
KnowledgeSettings.onClickMultipleLanguages=function(){Ext.get("switchToMultilingual").dom.style.display="block";Ext.get("langConfigContainer").dom.style.display="block"};KnowledgeSettings.hasChangedLanguage=function(a){return Ext.get("masterLanguageField").dom.value!=a};KnowledgeSettings.LANGUAGE_VALUES=[];KnowledgeSettings.LANGUAGE_LABELS=[];KnowledgeSettings.USER_VALUES=[];KnowledgeSettings.USER_LABELS=[];
KnowledgeSettings.initLanguageConfigs=function(a,c,b,d,f,e){KnowledgeSettings.LANGUAGE_VALUES=a;KnowledgeSettings.LANGUAGE_LABELS=c;KnowledgeSettings.USER_VALUES=b;KnowledgeSettings.USER_LABELS=d;KnowledgeSettings.masterRowNumber=f;KnowledgeSettings.maxNumberOfLanguages=e;KnowledgeSettings.updateLanguageRowOnMasterChange(KnowledgeSettings.masterRowNumber,!0)};
KnowledgeSettings.changeMasterLanguage=function(){var a=document.getElementById("masterLanguageField"),c=a.value,b=KnowledgeSettings.getLanguageRowNumber(c);if(-1===b){if(KnowledgeSettings.isMaximunNumberOfLanguageReached()){(c=document.getElementById(KnowledgeSettingsUI.pLANG_SELECT_PREFIX+KnowledgeSettings.masterRowNumber))||(c=document.getElementById(KnowledgeSettingsUI.pLANG_PREFIX+KnowledgeSettings.masterRowNumber));for(b=0;b<a.options.length;b++)if(c&&a.options[b].value==c.value){a.selectedIndex=
b;return}a.selectedIndex=0;return}KnowledgeSettings.updateLanguageRowOnMasterChange(KnowledgeSettings.masterRowNumber,!1);KnowledgeSettings.masterRowNumber=KnowledgeSettings.addLanguageConfigRow(c)}else KnowledgeSettings.updateLanguageRowOnMasterChange(KnowledgeSettings.masterRowNumber,!1),KnowledgeSettings.masterRowNumber=b;KnowledgeSettings.updateLanguageRowOnMasterChange(KnowledgeSettings.masterRowNumber,!0)};
KnowledgeSettings.updateLanguageRowOnMasterChange=function(a,c){var b=document.getElementById(KnowledgeSettingsUI.pSTATUS_PREFIX+a),d=document.getElementById(KnowledgeSettingsUI.pLANG_SELECT_PREFIX+a),f=Ext.get(KnowledgeSettingsUI.pREMOVE_PREFIX+a);c?(b.disabled=!0,b.checked=!0,d&&(d.disabled=!0),f&&f.hide()):(b.disabled=!1,d&&(d.disabled=!1),f&&f.show())};
KnowledgeSettings.changeLanguage=function(a){var c=document.getElementById(KnowledgeSettingsUI.pLANG_SELECT_PREFIX+a);c&&(document.getElementById(KnowledgeSettingsUI.pLANG_PREFIX+a).value=c.value)};KnowledgeSettings.addLanguage=function(a){var c=a.value;a.selectedIndex=0;a=document.getElementById(KnowledgeSettingsUI.pASSIGNEE_PREFIX+"-1").value;var b=document.getElementById(KnowledgeSettingsUI.pREVIEW_PREFIX+"-1").value;KnowledgeSettings.addLanguageConfigRow(c,a,b)};
KnowledgeSettings.addLanguageConfigRow=function(a,c,b){var d=document.getElementById(KnowledgeSettingsUI.LANG_CONFIG_TABLE),f=0,e=document.getElementById(KnowledgeSettingsUI.pMAX_LANG_ROW_INDEX),h=parseInt(e.value,10);e.value=h+1;d=d.insertRow(d.rows.length-1);e=d.insertCell(f++);e.className="actionColumn";var g=document.createElement("a");g.id=KnowledgeSettingsUI.pREMOVE_PREFIX+h;g.className="actionLink";g.innerHTML=LC.getLabel("Global","remove");g.onclick=function(){KnowledgeSettings.removeLanguageConfigRow(h);
return!1};e.appendChild(g);g=KnowledgeSettings.createSelectElemement(KnowledgeSettingsUI.pLANG_SELECT_PREFIX+h,KnowledgeSettings.LANGUAGE_VALUES,KnowledgeSettings.LANGUAGE_LABELS,a);e=d.insertCell(f++);e.appendChild(g);addEvent(g,"change",function(){KnowledgeSettings.changeLanguage(h)},!1);g=document.createElement("input");g.id=g.name=KnowledgeSettingsUI.pLANG_PREFIX+h;g.type="hidden";g.value=a;e.appendChild(g);a=document.createElement("input");a.id=a.name=KnowledgeSettingsUI.pSTATUS_PREFIX+h;a.type=
"checkbox";a.value="1";d.insertCell(f++).appendChild(a);c=KnowledgeSettings.createSelectElemement(KnowledgeSettingsUI.pASSIGNEE_PREFIX+h,KnowledgeSettings.USER_VALUES,KnowledgeSettings.USER_LABELS,c,!0);d.insertCell(f++).appendChild(c);b=KnowledgeSettings.createSelectElemement(KnowledgeSettingsUI.pREVIEW_PREFIX+h,KnowledgeSettings.USER_VALUES,KnowledgeSettings.USER_LABELS,b,!0);d.insertCell(f++).appendChild(b);KnowledgeSettings.isMaximunNumberOfLanguageReached()&&KnowledgeSettings.enableLastRow(!1);
return h};KnowledgeSettings.createSelectElemement=function(a,c,b,d,f){var e=document.createElement("select");e.id=e.name=a;f&&e.options.add(new Option(LC.getLabel("SelectElement","Required"),""));for(a=0;a<c.length;a++)f=new Option(b[a],c[a]),f.value===d&&(f.selected=!0),e.options.add(f);return e};
KnowledgeSettings.getLanguageRowNumber=function(a){for(var c=parseInt(document.getElementById(KnowledgeSettingsUI.pMAX_LANG_ROW_INDEX).value,10),b=0;b<c;b++){var d=document.getElementById(KnowledgeSettingsUI.pLANG_PREFIX+b);if(d&&d.value===a)return b}return-1};
KnowledgeSettings.removeLanguageConfigRow=function(a){a=Ext.get(KnowledgeSettingsUI.pLANG_PREFIX+a).parent("tr");document.getElementById(KnowledgeSettingsUI.LANG_CONFIG_TABLE).deleteRow(a.dom.rowIndex);KnowledgeSettings.isMaximunNumberOfLanguageReached()||KnowledgeSettings.enableLastRow(!0)};
KnowledgeSettings.enableLastRow=function(a){var c="";!1===a&&(c="disabled");a=Ext.query("input",KnowledgeSettingsUI.WRAPPING_NEWROW_DIV);for(var b=0;b<a.length;b++)a[b].disabled=c;a=Ext.query("select",KnowledgeSettingsUI.WRAPPING_NEWROW_DIV);for(b=0;b<a.length;b++)a[b].disabled=c};KnowledgeSettings.isMaximunNumberOfLanguageReached=function(){var a=Ext.query("tr","langtbl").length-2;return KnowledgeSettings.maxNumberOfLanguages&&a>=KnowledgeSettings.maxNumberOfLanguages?!0:!1};
function KnowledgeTabPanel(a){this.init(a)}KnowledgeTabPanel.instances={};KnowledgeTabPanel.addKnowledgeTabPanel=function(a){KnowledgeTabPanel.instances[a.id]=a};KnowledgeTabPanel.prototype.init=function(a){this.id=a.id;this.width=a.width;this.cls=a.cls||"";this.onChange=a.onChange;this.defaultTab=a.defaultTab;this.maxTextPixelWidth=a.maxTextPixelWidth;this.currentTabPanelItems=[];KnowledgeTabPanel.addKnowledgeTabPanel(this)};KnowledgeTabPanel.ELLIPSIS="...";
KnowledgeTabPanel.prototype.render=function(){var a=new Ext.TabPanel({renderTo:this.id,baseCls:"knowledgeTabPanel",width:this.width,activeTab:this.defaultTab,frame:!0,defaults:{autoHeight:!0},items:this.currentTabPanelItems,cls:this.cls,knowledgeTabPanel:this,hidden:!0});if(null!==this.maxTextPixelWidth){for(var c=[],d=0,b=0;b<a.items.getCount();b++)c[b]=Ext.util.TextMetrics.measure(a.getEl(),a.items.get(b).title).width,d+=c[b];if(d>this.maxTextPixelWidth){var g=Ext.util.TextMetrics.measure(a.getEl(),
KnowledgeTabPanel.ELLIPSIS).width;if(a.items.getCount()*g>=this.maxTextPixelWidth)for(b=0;b<a.items.getCount();b++)Ext.fly(a.getTabEl(a.items.get(b).id)).child("span.x-tab-strip-text",!0).qtip=a.items.get(b).title,a.items.get(b).setTitle(KnowledgeTabPanel.ELLIPSIS);else{for(var e=[],b=0;b<a.items.getCount();b++)e[b]=1;var h=a.items.getCount(),f=d-this.maxTextPixelWidth,k,l=this.maxTextPixelWidth,m;do{m=h;for(b=k=0;b<a.items.getCount();b++){var n=Math.ceil(f*(c[b]/d));1==e[b]&&c[b]<n+g?(e[b]=0,l-=
g,h--):(e[b]=1,k+=c[b])}h!=m&&(f=k-l,d=k)}while(h!=m);f=k-l;for(b=0;b<a.items.getCount();b++){if(1==e[b]){n=Math.ceil(f*(c[b]/k));for(d=a.items.get(b).title.length;0<d&&!(Ext.util.TextMetrics.measure(a.getEl(),a.items.get(b).title.substring(0,d)).width<c[b]-n-g);d--);}else d=0;Ext.fly(a.getTabEl(a.items.get(b).id)).child("span.x-tab-strip-text",!0).qtip=a.items.get(b).title;a.items.get(b).setTitle(a.items.get(b).title.substring(0,d)+KnowledgeTabPanel.ELLIPSIS)}}}}KnowledgeTabPanel.setBrandingPaletteOnActiveTab(a);
a.show();this.extTabs=a;for(b=0;b<a.items.length;b++){c=document.getElementById(a.items.get(b).tabContentId);g=c.getElementsByTagName("iframe");for(e=0;e<g.length;e++)g[e].heightBackup=g[e].height,g[e].widthBackup=g[e].width;c.style.display="none"}a.addListener("tabchange",KnowledgeTabPanel.onTabChange);KnowledgeTabPanel.onTabChange(a,a.items.get(0),!0)};
KnowledgeTabPanel.onTabChange=function(a,c,d){var b=a.knowledgeTabPanel;KnowledgeTabPanel.setBrandingPaletteOnActiveTab(a);for(var g=0;g<a.items.length;g++)if(a.items.get(g)==c){!d&&b.onChange&&Knowledge.getFunction(b.onChange,window).call(b,g.toString());for(var e=document.getElementById(c.tabContentId).getElementsByTagName("iframe"),h=document.getElementById(a.items.get(g).tabContentId).getElementsByTagName("iframe"),f=0;f<e.length;f++)if(h[f].contentWindow.document&&h[f].contentWindow.document.body){var k=
h[f].contentWindow.document.body.innerHTML,l=h[f].contentWindow.document.getElementsByTagName("head")[0].innerHTML;k&&0!==k.trim().length&&(e[f].contentWindow.document.write("\x3chead\x3e"+l+"\x3c/head\x3e\x3cbody\x3e"+k+"\x3c/body\x3e"),e[f].contentWindow.document.close());e[f].height=h[f].heightBackup;e[f].width=h[f].widthBackup}}};
KnowledgeTabPanel.prototype.addTab=function(a,c){var d=Ext.fly(c).dom.innerHTML;0===d.length?this.currentTabPanelItems.push({cls:"emptyTab",tabContentId:c,title:a}):this.currentTabPanelItems.push({html:d,tabContentId:c,title:a})};KnowledgeTabPanel.setBrandingPaletteOnActiveTab=function(a){for(var c=0;c<a.items.getCount();c++){var d=a.getTabEl(a.items.get(c)),d=Ext.get(d).child("a.x-tab-right"),b=KnowledgeTabPanel.ACTIVE_BRAND_CLASS.split(" ");a.items.get(c)==a.getActiveTab()?d.addClass(b):d.removeClass(b)}};
function TOCDetailRenderer(a){this.init(a)}TOCDetailRenderer.instances={};TOCDetailRenderer.addTOCDetailRenderer=function(a){TOCDetailRenderer.instances[a.id]=a};TOCDetailRenderer.prototype.init=function(a){this.elem=document.getElementById(a.elemId);this.content=document.getElementById(a.contentId);this.height=a.height;TOCDetailRenderer.addTOCDetailRenderer(this);Ext.EventManager.onWindowResize(TOCDetailRenderer.resize,this,!0);this.resize()};
TOCDetailRenderer.resize=function(a,b){this.resize(a,b)};TOCDetailRenderer.prototype.resize=function(a,b){var c=this.getHeight(b);this.elem.style.height=c+0+"px";/MSIE 6/i.test(navigator.userAgent)&&(this.content.style.width=document.body.clientWidth-270)};TOCDetailRenderer.prototype.getHeight=function(a){var b=this.height;0>=b&&(a=a||TOCDetailRenderer.getWindowHeight(),b=a+b);50>b&&(b=50);return b};
TOCDetailRenderer.getWindowHeight=function(){var a=0;if("number"==typeof window.innerWidth)a=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))a=document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))a=document.body.clientHeight;return a};function TOCSectionSelector(a){this.init(a)}TOCSectionSelector.instances={};
TOCSectionSelector.addTOCSectionSelector=function(a){TOCSectionSelector.instances[a.id]=a};
TOCSectionSelector.prototype.init=function(a){this.menu=Ext.get(a.menuId);this.content=Ext.get(a.contentId);a=this.menu.select("div[sectionIndex]",!0).first();this.activate(a.dom.attributes.getNamedItem("sectionIndex").value);this.bindScroll();this.menu.on("click",function(a,c){a.stopEvent();var d=c.getAttribute("sectionindex");d&&this.bound&&(this.activate(d),d=this.content.select("[sectionindex\x3d"+d+"]").first().dom.offsetTop-this.content.dom.offsetTop-15,this.unbindScroll(),this.content.scrollTo("top",
d,{callback:this.bindScroll,scope:this}))},this);this.content.scrollTo("top",1);this.content.scrollTo("top",0)};TOCSectionSelector.prototype.calcScrollPosition=function(){var a=!1,b,c=this.content.select("div[sectionIndex]",!0);c.each(function(c){if(100>c.getOffsetsTo(this.content)[1])b=Ext.get(c),a=!0;else return!1},this);a?(c=b.dom.attributes.getNamedItem("sectionindex").value,this.activate(c)):this.activate(c.first)};
TOCSectionSelector.prototype.bindScroll=function(){this.content.on("scroll",this.calcScrollPosition,this,{buffer:250});this.bound=!0};TOCSectionSelector.prototype.unbindScroll=function(){this.content.un("scroll",this.calcScrollPosition,this);this.bound=!1};TOCSectionSelector.prototype.activate=function(a){a="[sectionindex\x3d"+a+"]";this.menu.select(a).radioClass("selected");this.content.select(a).radioClass("selected")};
function clearSearch(a){document.getElementById(a).value="";a=document.documentElement.getElementsByTagName("input");for(var b=0;b<a.length;b++)0===a.item(b).name.indexOf("articleType_")&&(a.item(b).checked=!0);if(a=document.getElementById("spellOff"))a.value=!1;if(a=document.getElementById("spellOptions"))a.innerHTML=""}function clearSelects(a){for(var b=document.documentElement.getElementsByTagName("select"),c=0;c<b.length;c++)0===b.item(c).name.indexOf(a)&&(b.item(c).selectedIndex=0)};
Ext.namespace("Knowledge");Knowledge.LC={labels:{}};Knowledge.LC.SUFFIX_ONE="One";Knowledge.LC.addLabel=function(a,b,c){Knowledge.LC.labels[a]||(Knowledge.LC.labels[a]={});Knowledge.LC.labels[a][b]=c};
Knowledge.LC.getLabel=function(){var a,b=this.getLabel.arguments;if(b[0]&&b[1])if(a=Knowledge.LC.labels[b[0]],Knowledge.isNull(a))alert("Missing Section name:'"+b[0]+"'");else if(a=a[b[1]],Knowledge.isNull(a))alert("Missing Label (section name:'"+b[0]+"', message name:'"+b[1]+"')");else for(i=2;i<b.length;i++)a=a.replace(RegExp("\\{"+(i-2)+"\\}","g"),b[i]);else alert("Usage: getLabel(sectionName, messageName, ...)");return a};
Knowledge.LC.getNumberedLabel=function(){var a=this.getNumberedLabel.arguments;if(3<=a.length&&a[2]&&"number"==typeof a[2])return 1>=a[2]&&Knowledge.LC.labels[a[0]][a[1]+Knowledge.LC.SUFFIX_ONE]&&(a[1]+=Knowledge.LC.SUFFIX_ONE),Knowledge.LC.getLabel.apply(this,a);alert("Usage: getNumberedLabel(sectionName, messageName, number, ...)");return null};
function MultiSelect(a){this.init(a)}MultiSelect.instances={};MultiSelect.addObjectList=function(a){MultiSelect.instances[a.id]=a};MultiSelect.prototype.init=function(a){this.id=a.id;this.messages={};this.messages.removeRequiredElementsError=a.removeRequiredElementsError;this.availItems=document.getElementById(this.id+"_availableItems");this.selectItems=document.getElementById(this.id+"_selectedItems");this.errorMsg=document.getElementById(this.id+"_errorMsg");MultiSelect.addObjectList(this)};
MultiSelect.prototype.add=function(){this.hideErrorMessage();for(var a=0;a<this.availItems.options.length;)if(this.availItems.options[a].selected){var b=this.availItems.options[a];this.availItems.remove(a);this.selectItems.options.add(b)}else a++};
MultiSelect.prototype.remove=function(){for(var a=[],b=0,c=!1;b<this.selectItems.options.length;)if(this.selectItems.options[b].selected){var d=this.selectItems.options[b];2<=d.text.length&&" *"==d.text.substring(d.text.length-2,d.text.length)?(b++,c=!0):(this.selectItems.remove(b),a.push(d))}else b++;if(0<a.length){for(b=0;b<this.availItems.options.length;b++)a.push(this.availItems.options[b]);a.sort(MultiSelect.optionCompare);for(b=this.availItems.options.length=0;b<a.length;)this.availItems.options.add(a[b]),
b++}c?this.showErrorMessage(this.messages.removeRequiredElementsError):this.hideErrorMessage()};MultiSelect.prototype.top=function(){this.hideErrorMessage();for(var a=[],b=0;b<this.selectItems.options.length;)if(this.selectItems.options[b].selected){var c=this.selectItems.options[b];this.selectItems.remove(b);a.push(c)}else b++;if(0<a.length)for(b=0;b<a.length;b++)try{this.selectItems.options.add(a[b],this.selectItems.options[b])}catch(d){this.selectItems.options.add(a[b],b)}};
MultiSelect.prototype.up=function(){this.hideErrorMessage();if(!this.selectItems.options[0].selected)for(var a=1;a<this.selectItems.options.length;a++)if(this.selectItems.options[a].selected){var b=this.selectItems.options[a];this.selectItems.remove(a);try{this.selectItems.options.add(b,this.selectItems.options[a-1])}catch(c){this.selectItems.options.add(b,a-1)}}};
MultiSelect.prototype.down=function(){this.hideErrorMessage();if(!this.selectItems.options[this.selectItems.options.length-1].selected)for(var a=this.selectItems.options.length-2;0<=a;a--)if(this.selectItems.options[a].selected){var b=this.selectItems.options[a];this.selectItems.remove(a);try{this.selectItems.options.add(b,this.selectItems.options[a+1])}catch(c){this.selectItems.options.add(b,a+1)}}};
MultiSelect.prototype.getSelectionAsArray=function(){for(var a=[],b=0;b<this.selectItems.options.length;b++)a.push(this.selectItems.options[b].value);return a};MultiSelect.prototype.getSelection=function(){return this.getSelectionAsArray().join(",")};MultiSelect.prototype.bottom=function(){this.hideErrorMessage();for(var a=[],b=0;b<this.selectItems.options.length;)if(this.selectItems.options[b].selected){var c=this.selectItems.options[b];this.selectItems.remove(b);a.push(c)}else b++;for(b=0;b<a.length;b++)this.selectItems.options.add(a[b])};
MultiSelect.prototype.hideErrorMessage=function(){this.errorMsg.style.display="none"};MultiSelect.prototype.showErrorMessage=function(a){this.errorMsg.innerHTML=a;this.errorMsg.style.display="block"};MultiSelect.stringCompare=function(a,b){return a<b?-1:a>b?1:0};MultiSelect.optionCompare=function(a,b){return MultiSelect.stringCompare(a.text,b.text)};
function ObjectList(a){this.init(a)}ObjectList.instances={};ObjectList.TITLE_COLUMN="Title";ObjectList.addObjectList=function(a){ObjectList.instances[a.id]=a};ObjectList.getInstance=function(a,b){var c;if((c=ObjectList.instances[a])||(c=ObjectList.instances[b]))return c};
ObjectList.prototype.init=function(a){this.id=a.id;this.engDiv=a.engDiv;this.gridDiv=a.gridDiv;this.loadingScreen=a.loadingScreen;this.proxy=a.proxy;this.width=a.width;this.widthMargin=a.widthMargin||0;this.height=a.height;this.currentPage=a.currentPage||1;this.nextPageAvailable=a.nextPageAvailable||!1;this.numberOfItemsPerPage=a.numberOfItemsPerPage||0;this.oldPageSize=0;this.currentSort="";this.currentDir="ASC";this.emptyListText=a.emptyListText||"";this.emptyGroupText=a.emptyGroupText||this.emptyListText;
this.numberOfItemsInCurrentPage=0;this.selectedItems=new Map;this.userId=a.userId;this.oldHeights=[0,0];this.oldWidths=[0,0];this.cookieUpdated=!1;this.proxy.ObjectList=this;this.doEmptyHeader();a=this.getGridWidth();var b=this.getHeight(),c=Ext.data.Record.create([]),c=new Ext.data.JsonReader({},c);this.selModel=new ObjectList.CheckboxSelectionModel({objectList:this});this.grid=new Ext.grid.GridPanel({id:this.id,cls:"knowledge",store:new ObjectList.GroupingStore({objectList:this,reader:c,remoteSort:!0,
proxy:this.proxy}),tbar:new Ext.Toolbar({cls:"toolbar"}),columns:[],selModel:this.selModel,view:new Ext.grid.GroupingView({groupTextTpl:"{text}",showGroupName:!1,enableGrouping:!1,emptyText:this.emptyListText,emptyGroupText:this.emptyGroupText,enableRowBody:!0,objectList:this,getRowClass:function(a,b,c,d){if(this.objectList.listDefinition.columnAsExtensionRowContent){a=a.data[this.objectList.listDefinition.columnAsExtensionRowContent];if(!a||0===a.length)return"x-grid3-row-collapsed";c.body=this.objectList.listDefinition.isMultiSelectable?
"\x3cdiv id\x3d'"+this.objectList.id+"_extrow_"+b+"' class\x3d'extensionRow'\x3e"+a+"\x3c/div\x3e":a;return"x-grid3-row-expanded"}return"x-grid3-row-collapsed"}}),frame:!1,collapsible:!1,animCollapse:!1,width:a,height:b});ObjectList.addObjectList(this);var d=this;Ext.EventManager.onWindowResize(ObjectList.resize,this,!0);Ext.EventManager.addListener(window,"beforeunload",ObjectList.windowOnUnload,this);addEvent(document.body,"mousedown",function(a){a=getEventTarget(a);a.id!=d.id+"_pageSizeSelector"&&
a.parentNode.id!=d.id+"_pageSizeSelector"&&ObjectList.hideSelector(d.id+"_pageSizeSelector");a.id!=d.id+"_selectionSelector"&&a.parentNode.id!=d.id+"_selectionSelector"&&ObjectList.hideSelector(d.id+"_selectionSelector")},!0);this.grid.addListener("mouseover",function(a){ObjectList.handleMouseOver(a)});this.grid.addListener("mouseout",function(a){ObjectList.handleMouseOut(a)});this.grid.addListener("columnmove",ObjectList.columnMove,this);this.grid.addListener("columnresize",ObjectList.columnResize,
this)};ObjectList.VisualForceProxy=function(){ObjectList.VisualForceProxy.superclass.constructor.call(this)};
Ext.extend(ObjectList.VisualForceProxy,Ext.data.DataProxy,{load:function(a,b,c,d,e){if(!1!==this.fireEvent("beforeload",this,a))if(this.ObjectList.data||this.ObjectList.showLoadingScreen(),this.ObjectList.updateObject={success:function(a,b,d,e,l){a.loadData(b.rows);a.resultData=b.data;a.currentSort=d;a.currentDir=e;a.numberOfItemsPerPage=l;a.proxy.fireEvent("load",a.proxy,b,c)},failure:function(){this.fireEvent("loadexception",this,"error",c);c.call(d,null,e,!1)}},this.ObjectList.data)this.ObjectList.updateObject.success(this.ObjectList,
this.ObjectList.data,this.ObjectList.currentSort,this.ObjectList.currentDir,this.ObjectList.numberOfItemsPerPage);else{b=this.ObjectList.getVisibleColums();if(a.sort!=this.currentSort||a.dir!=this.currentDir)this.ObjectList.currentSort=a.sort,this.ObjectList.currentDir=a.dir,this.ObjectList.updateCookie(!1,!0,!1);updateData(a.newPageSize,a.newPage,a.sort,a.dir,Ext.encode(b))}else c.call(d||this,null,e,!1)}});
ObjectList.handleMouseOver=function(a){a=a.getTarget();if(1==a.nodeType&&"DIV"==a.nodeName&&0<=a.className.indexOf("x-grid3-hd-inner")){for(var b=a.className.replace("x-grid3-hd-inner",""),c=b.indexOf("x-grid3-hd-"),d=b.indexOf("--",c),e=b.indexOf("---",d+2),c=b.substring(c+11,d),b=b.substring(d+2,e),d=ObjectList.instances[c],e=0;e<d.listDefinition.columnDefinitions.length;e++)if(d.listDefinition.columnDefinitions[e].name==b&&!1===d.listDefinition.columnDefinitions[e].sortable)return;UserContext&&
UserContext.uiSkin==UiSkin.ALOHA.apiValue?Sfdc.Dom.addClass(a,"over"):a.style.background="#EBF3FD url(/EXT/ext-2.1/resources/images/default/grid/grid3-hrow-over.gif) repeat-x scroll left bottom"}};ObjectList.handleMouseOut=function(a){a=a.getTarget();1==a.nodeType&&("DIV"==a.nodeName&&0<=a.className.indexOf("x-grid3-hd-inner"))&&(a.style.background="",Sfdc.Dom.removeClass(a,"over"))};
ObjectList.prototype.setListDefinition=function(a,b){if(this.type&&this.type==a.type&&a.useSortFromCookie)this.currentPage=1,this.selectedItems=new Map,this.listDefinition.isMultiSelectable&&this.updateSelectionMenu();else{this.type=a.type;this.inContextPane=a.inContextPane;this.listDefinition=a;this.listDefaults=b;this.numberOfItemsPerPage=b.pageSize;this.nextPageAvailable=!1;this.currentPage=1;this.currentSort=b.sort;this.currentDir=b.dir;this.selectedItems=new Map;this.cookieUpdated=!1;this.colsInSelection=
this.getColsInSelection();this.correctedQuery=a.correctedQuery;this.query=a.query;this.listDefinition.idColumnName?this.realIdColumnName=this.listDefinition.idColumnName:this.listDefinition.columnDefinitions[0]&&(this.realIdColumnName=this.listDefinition.columnDefinitions[0].name);this.createHeader();this.setEmptyPageNavigator();this.grid.getStore().removeAll();var c=this.getGridWidth(),c=this.getColumnsFromColDefs(c),d=this.getRecordFromColDefs(),d=new Ext.data.JsonReader({},d),d=new ObjectList.GroupingStore({objectList:this,
reader:d,remoteSort:!0,proxy:this.proxy,sortInfo:{field:this.currentSort,direction:this.currentDir}}),c=new Ext.grid.ColumnModel(c);this.grid.reconfigure(d,c);this.fillTopToolbar();this.createPageSizeMenu();this.listDefinition.isMultiSelectable&&(this.createSelectionMenu(),this.updateSelectionMenu(),this.grid.getSelectionModel().addListener("selectionchange",function(a){this.updateSelectionComponents()},this));this.grid.getSelectionModel().setIsSelectableColumnName(this.listDefinition.isSelectableColumnName);
this.grid.getSelectionModel().setDisabledCheckboxCSS(this.listDefinition.disabledCheckboxCSS);this.grid.getSelectionModel().setDisabledCheckboxTitle(this.listDefinition.disabledCheckboxTitle)}};
ObjectList.prototype.doEmptyHeader=function(){var a=Ext.get(this.engDiv).down("div").down("div").dom,b;b="\x3cdiv class\x3d'content'\x3e"+("\x3cimg src\x3d'"+UserContext.getUrl("/s.gif")+"' height\x3d'32px' width\x3d'32px' style\x3d'display: inline; float: left; margin-right: 5px;' alt\x3d''/\x3e");b+="\x3ch1 class\x3d'pageType noSecondHeader' style\x3d'font-size:14px'\x3e\x26nbsp;\x3c/h1\x3e";b+="\x3cdiv class\x3d'blank'\x3e\x3c/div\x3e";b+="\x3c/div\x3e";a.innerHTML=b};
ObjectList.prototype.createHeader=function(){var a=document.getElementById(this.id+"_sectionHeader"),b=document.getElementById("spellOptions"),c=this.listDefinition.header,d=this.listDefinition.correctedQuery,e=this.listDefinition.query;if(c.displaySectionHeader){var f=Ext.get(a).down("div").dom,g;g="\x3cdiv class\x3d'content'\x3e"+c.icon;c.titleDesc?(g+="\x3ch1 class\x3d'pageType'\x3e"+c.title+"\x3c/h1\x3e",g+="\x3ch2 class\x3d'pageDescription'\x3e"+c.titleDesc+"\x3c/h2\x3e"):g+="\x3ch2 class\x3d'pageDescription' style\x3d'padding:10px'\x3e"+
c.title+"\x3c/h2\x3e";g+="\x3c/div\x3e";if(c.helps){g+="\x3cdiv class\x3d'links'\x3e";for(var h=0;h<c.helps.length;h++)g+=c.helps[h];g+="\x3c/div\x3e"}f.innerHTML=g;c.displaySectionHeader&&(a.style.display="block");g="";d&&(g+=this.listDefinition.labels.ArticleListLabels.spell1+'\x3ci\x3e\x3ca href\x3d"#" style\x3d"color: blue;" class\x3d"helpLink" onclick\x3d"document.getElementById(\'spellOff\').value \x3d true; runSearch();"\x3e'+e+"\x3c/a\x3e\x3c/i\x3e. "+this.listDefinition.labels.ArticleListLabels.spell2+
'\x3ci\x3e\x3ca href\x3d"#"  style\x3d"color: blue" class\x3d"helpLink" onclick\x3d"document.getElementById(\'searchInput\').value \x3d this.innerHTML; runSearch();"\x3e'+d+"\x3c/a\x3e\x3c/i\x3e.");b.innerHTML=g}else a.style.display="none"};
ObjectList.prototype.fillTopToolbar=function(){Ext.QuickTips.init();var a=this.grid.getTopToolbar();a.items.each(function(a){this.remove(a);a.destroy()},a.items);var b=!1,c=this.listDefinition.header;if(c.tbItems){LC.isRtlPage()&&a.add("-\x3e");for(var d=function(){Knowledge.call(this.js,this.ctx)},e=0;e<c.tbItems.length;e++)switch(c.tbItems[e].type){case "button":var f=new Ext.Button({text:c.tbItems[e].label,tooltip:c.tbItems[e].tooltip?{text:c.tbItems[e].tooltip,shadow:!0,trackMouse:!0}:null});
a.add(f);f.addListener("click",d,{js:c.tbItems[e].javascript,ctx:this});break;case "text":f=new Ext.Toolbar.TextItem({text:c.tbItems[e].text});a.add(f);break;case "separator":f=new Ext.Toolbar.Separator;a.add(f);break;case "columnsMenu":if(f=this.setMenu())a.add(f),b=!0;break;case "buttonMenu":(f=this.setMenuButton(c.tbItems[e]))&&a.add(f)}b||LC.isRtlPage()&&a.add({xtype:"tbspacer",id:"articleTtbSpacer",width:ObjectList.getToolbarSpacerWidth(a)})}if(!b&&(b=this.setMenu()))LC.isRtlPage()||a.add("-\x3e"),
a.add(b);a.doLayout()};
ObjectList.prototype.createPageSizeMenu=function(){var a=document.getElementById(this.id+"_pageSizeSelector"),b=[];b.push('\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"selector"\x3e');for(var c=0;c<this.listDefinition.pageSizeMenuItems.length;c++){var d=this.listDefinition.pageSizeMenuItems[c];b.push("\x3ctr");b.push(' class\x3d"opt"');b.push(' id\x3d"'+this.id+"_selector_opt_"+d.pageSize+'"');b.push(" onmouseover\x3d\"if (this.className.indexOf('optHover') \x3c 0) { this.className +\x3d ' optHover' }\"");b.push(" onmouseout\x3d\"this.className \x3d this.className.replace('optHover', '')\"");
b.push(" onmousedown\x3d\"ObjectList.changePageSize('"+this.id+"', "+d.pageSize+');"');b.push("\x3e");b.push('\x3ctd class\x3d"text"\x3e'+d.firstPart+"\x3c/td\x3e");b.push('\x3ctd class\x3d"size"\x3e'+d.secondPart+"\x3c/td\x3e");b.push('\x3ctd class\x3d"text"\x3e'+d.thirdPart+"\x3c/td\x3e");b.push("\x3c/tr\x3e")}b.push("\x3c/table\x3e");b.push("\x3cimg class\x3d'selectArrow' src\x3d'/s.gif' alt\x3d'"+this.listDefinition.labels.ArticleListLabels.ChangeListSizeArrow+"' /\x3e");a.innerHTML=b.join("");
this.selectPageSize(this.numberOfItemsPerPage)};
ObjectList.prototype.createSelectionMenu=function(){if(Knowledge.isNull(document.getElementById(this.id+"_selectionSelector"))){var a=document.getElementById(this.id+"_bottomBar_Left"),b=[];b.push('\x3cspan class\x3d"selectorTarget selectCount" id\x3d"'+this.id+'_selectionSelector"');b.push(' onmouseover\x3d"ObjectList.hoverSelector(this);"');b.push(' onmouseout\x3d"ObjectList.unhoverSelector(this);"');b.push(" onmousedown\x3d\"ObjectList.showSelector('"+this.id+"_selectionSelector');\"");b.push("\x3e");
b.push(this.listDefinition.labels.ArticleListLabels.SelectionCount.replace("{0}",""));b.push('\x3cdiv class\x3d"selector selection"\x3e');b.push('\x3cdiv class\x3d"opt"');b.push(' id\x3d"'+this.id+'_selectPage"');b.push(" onmouseover\x3d\"if (this.className.indexOf('optHover') \x3c 0) { this.className +\x3d ' optHover' }\"");b.push(" onmouseout\x3d\"this.className \x3d this.className.replace('optHover', '')\"");b.push(" onmousedown\x3d\"ObjectList.selectPage('"+this.id+"');\"");b.push("\x3e");b.push(this.listDefinition.labels.Paginator.select_page);
b.push("\x3c/div\x3e");b.push('\x3cdiv class\x3d"opt"');b.push(' id\x3d"'+this.id+'_deselectPage"');b.push(" onmouseover\x3d\"if (this.className.indexOf('optHover') \x3c 0) { this.className +\x3d ' optHover' }\"");b.push(" onmouseout\x3d\"this.className \x3d this.className.replace('optHover', '')\"");b.push(" onmousedown\x3d\"ObjectList.deselectPage('"+this.id+"');\"");b.push("\x3e");b.push(this.listDefinition.labels.Paginator.deselect_page);b.push("\x3c/div\x3e");b.push('\x3cdiv class\x3d"opt"');
b.push(' id\x3d"'+this.id+'_clearAll"');b.push(" onmouseover\x3d\"if (this.className.indexOf('optHover') \x3c 0) { this.className +\x3d ' optHover' }\"");b.push(" onmouseout\x3d\"this.className \x3d this.className.replace('optHover', '')\"");b.push(" onmousedown\x3d\"ObjectList.clearAllSelection('"+this.id+"');\"");b.push("\x3e");b.push(this.listDefinition.labels.Paginator.clear_all_selections);b.push("\x3c/div\x3e");b.push("\x3c/div\x3e");b.push("\x3cimg class\x3d'selectArrow' src\x3d'/s.gif' alt\x3d'"+
this.listDefinition.labels.ArticleListLabels.SelectDeselectArticlesArrow+"' /\x3e");b.push("\x3c/span\x3e");a.innerHTML+=b.join("")}};
ObjectList.prototype.getColumnsFromColDefs=function(a){var b=this.listDefinition.columnDefinitions||[],c=this.listDefaults.shownColumnsOrder||[],d=[],e=new Map,f,g;this.listDefinition.isMultiSelectable&&(d.push(this.selModel),a-=20);for(var h=0;h<c.length;h++)f=ObjectList._getColDef(b,c[h]),Knowledge.isNull(f)||(g={},this._fillColFromColdef(g,f,this.listDefaults.shownColumnsWidth[h],a),g.hidden=!1,d.push(g),e.put(f.name,f.name));for(c=0;c<b.length;c++)f=b[c],Knowledge.isNull(e.map[f.name])&&(g={},
this._fillColFromColdef(g,f,0,a),g.hidden=!0,d.push(g),e.put(f.name,f.name));return d};
ObjectList.prototype._fillColFromColdef=function(a,b,c,d){a.coldef=b;a.header=b.label;a.hidden=!1;a.dataIndex=b.name;a.menuDisabled=!0;a.sortable=b.sortable;a.resizable=b.resizable;a.groupBy=b.groupBy;a.width=0<c?c:0<b.pxwidth?b.pxwidth:(d-4)*b.width/100;this.inContextPane&&b.name===ObjectList.TITLE_COLUMN&&(a.width=window.top.Sfdc.support.servicedesk.SuggestedKnowledge.TITLE_COLUMN_WIDTH);a.id=this.id+"--"+b.name+"---"};
ObjectList._getColDef=function(a,b){for(var c=0;c<a.length;c++)if(a[c].name==b)return a[c];return null};ObjectList.prototype.getRecordFromColDefs=function(){for(var a=this.listDefinition.columnDefinitions||[],b=new Map,c=0;c<a.length;c++){var d=a[c];b.put(d.name,d.name)}var a=[],e;for(e in b.map)e&&a.push(e);return Ext.data.Record.create(a)};ObjectList.prototype.getColsInSelection=function(){for(var a=this.listDefinition.columnDefinitions||[],b=[],c=0;c<a.length;c++)a&&b.push(a[c].name);return b};
ObjectList.prototype.load=function(a){this.data=a;this.data.forceCurrentSort&&this.grid.getStore().sortInfo&&(this.grid.getStore().sortInfo.field=this.data.forceCurrentSort);this.data.forceCurrentDir&&this.grid.getStore().sortInfo&&(this.grid.getStore().sortInfo.direction=this.data.forceCurrentDir);this.grid.getStore().load({});this.data=null};
ObjectList.prototype.loadData=function(a){this.numberOfItemsInCurrentPage=a.length;this.numberOfDisabledItems=0;this.grid.getStore().removeAll();this.showLoadingScreen();this.grid.getStore().suspendEvents(!1);this.grid.getStore().loadData(a);this.grid.getView().refresh(!0);this.grid.getStore().resumeEvents();0===this.numberOfItemsInCurrentPage&&(this.grid.getGridEl().query(".x-grid-empty")[0].style.width=this.grid.getColumnModel().getTotalWidth()-18+"px");if(this.listDefinition.isMultiSelectable){var b=
this.selModel.getIsSelectableColumnName();if(!Knowledge.isNull(b)&&0<this.numberOfItemsInCurrentPage)for(var c=0;c<a.length;c++)a[c][b]||this.numberOfDisabledItems++;this.updateSelection()}this.cookieUpdated=!1};ObjectList.prototype.updateCompleted=function(){};ObjectList.prototype.render=function(a){this.grid.render(a);this.gridDiv.style.height=this.getHeight()+0+"px";this.gridDiv.style.width=this.getGridWidth()+0+"px"};
ObjectList.prototype.getColumnIndex=function(a){for(var b=this.grid.getColumnModel().getColumnsBy(function(a,b){return!0}),c=0;c<b.length;c++){var d=b[c].id,e=d.indexOf("--");if(!(0>e)){var f=d.indexOf("---",e+2);if(d.substring(e+2,f)==a)return c}}return-1};
ObjectList.onItemHandler=function(a,b){var c=a.id.indexOf("_item_"),d=a.id.substring(c+6),c=a.id.substring(0,c),c=ObjectList.instances[c],d=c.getColumnIndex(d);c.grid.getColumnModel().setHidden(d,!b);c.updateCookie(!1,!1,!0);Knowledge.isNull(c.menu)||(c.menu.removeAll(),c.fillMenu());b&&c.grid.getStore().load({})};
ObjectList.prototype.setMenuButton=function(a){if(this.listDefinition.header&&""!==this.listDefinition.header.menuTitle){this.menu=new ObjectList.Menu({id:this.id+"_menu"});var b={text:a.label,id:this.id+"_newMenuButton",menu:this.menu};this.fillMenuButton(a);return b}return null};
ObjectList.prototype.setMenu=function(){if(this.listDefinition.header&&""!==this.listDefinition.header.menuTitle){var a="left",b="tr-br?";LC.isRtlPage()&&(a="right",b="tl-bl?");this.menu=new ObjectList.Menu({id:this.id+"_menu",style:"text-align: "+a});a={text:this.listDefinition.header.menuTitle,id:this.id+"_buttonMenu",menu:this.menu,menuAlign:b};this.fillMenu();return a}return null};
ObjectList.prototype.fillMenuButton=function(a){for(var b=this.menu,c=0;c<a.items.length;c++){var d=new Ext.menu.Item({id:"docType_"+a.items[c].label,text:a.items[c].label,href:a.items[c].url});b.add(d)}};
ObjectList.prototype.fillMenu=function(){for(var a=function(a,b){return!c.isHidden(b)},b=0;b<this.listDefinition.header.menuItems.length;b++)if("visibleColumns"===this.listDefinition.header.menuItems[b].type){for(var c=this.grid.getColumnModel(),d=c.getColumnsBy(a),e=new Map,f=0;f<d.length;f++){var g=d[f].id,h=g.indexOf("--");if(!(0>h)){var k=g.indexOf("---",h+2),g=g.substring(h+2,k);e.put(g,g);this._addColInMenu(g)}}for(f=0;f<this.listDefinition.columnDefinitions.length;f++)d=this.listDefinition.columnDefinitions[f],
Knowledge.isNull(e.map[d.name])&&this._addColInMenu(d.name)}};ObjectList.prototype._addColInMenu=function(a){a=ObjectList._getColDef(this.listDefinition.columnDefinitions,a);if(a.visible||a.mandatory)a=new Ext.menu.CheckItem({id:this.id+"_item_"+a.name,text:a.label,checked:a.mandatory||this._isShown(a.name),disabled:a.mandatory,checkHandler:ObjectList.onItemHandler}),this.menu.add(a)};ObjectList.prototype._isShown=function(a){return!this.grid.getColumnModel().getColumnById(this.id+"--"+a+"---").hidden};
ObjectList.getToolbarSpacerWidth=function(a){a=("object"==typeof a?a.getWidth():a)-340;return 2>a?2:a};ObjectList.prototype.setMinHeight=function(a){this.minHeight=a;!this.inContextPane&&this.grid.getHeight()<a&&(this.gridDiv.style.height=a+0+"px",this.grid.setHeight(a),this.grid.syncSize())};
ObjectList.resize=function(a,b){var c=a-this.gridDiv.offsetWidth;this.inContextPane||(this.grid.el.dom.style.display="none");var d=this.getHeight(b);this.gridDiv.style.width="100%";this.engDiv.style.width="100%";var e=this.getGridWidth(),f=this.gridDiv.style.height;this.inContextPane&&(d>b&&(d=b),e>a&&(e=a));this.gridDiv.style.height=d+0+"px";this.gridDiv.style.width=e+this.widthMargin+"px";this.inContextPane||(this.grid.el.dom.style.display="");if(!this.inContextPane||Ext.isIE7||Ext.isIE8){if(this.oldHeights[0]==
d&&this.oldWidths[0]==e){this.grid.setHeight(parseInt(f,10));this.gridDiv.style.height=f;return}if(this.oldHeights[1]==d&&this.oldWidths[1]==e){if(this.stopResizing){this.stopResizing=!1;return}d=this.oldHeights[0]<this.oldHeights[1]?this.oldHeights[0]:this.oldHeights[1];e=this.oldWidths[0]>this.oldWidths[1]?this.oldWidths[0]:this.oldWidths[1];this.grid.el.dom.style.display="none";this.gridDiv.style.height=d+0+"px";this.gridDiv.style.width=e+this.widthMargin+"px";this.grid.el.dom.style.display="";
this.stopResizing=!0}else this.oldHeights[1]=this.oldHeights[0],this.oldWidths[1]=this.oldWidths[0],this.oldHeights[0]=d,this.oldWidths[0]=e}this.grid.suspendEvents();this.grid.setHeight(d);d=e+this.widthMargin;LC.isRtlPage()&&(f=this.grid.getTopToolbar(),e=ObjectList.getToolbarSpacerWidth(d),f=f.findById("articleTtbSpacer"),Knowledge.isNull(f)||f.setWidth(e));this.grid.setWidth(d);this.grid.resumeEvents();this.inContextPane&&(d=this.getColumnIndex(ObjectList.TITLE_COLUMN),c=this.grid.getColumnModel().getColumnWidth(d)+
c,window.top.Sfdc.support.servicedesk.SuggestedKnowledge.TITLE_COLUMN_WIDTH=c,this.grid.getColumnModel().setColumnWidth(d,c));this.grid.syncSize()};ObjectList.prototype.getWidth=function(){var a=this.width;0===a&&(a=this.engDiv.offsetWidth);50>a&&(a=50);return a};ObjectList.prototype.getGridWidth=function(){var a=this.width;0===a&&(a=this.gridDiv.offsetWidth);50>a&&(a=50);return a};
ObjectList.getWindowHeight=function(){var a=0;if("number"===typeof window.innerWidth)a=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))a=document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))a=document.body.clientHeight;return a};
ObjectList.prototype.getHeight=function(a){var b=this.height;0>=b&&(a=a||ObjectList.getWindowHeight(),b=a+b);150>b&&(b=150);!Knowledge.isNull(this.minHeight)&&b<this.minHeight&&(b=this.minHeight);return b};ObjectList.showSelector=function(a){if((a=document.getElementById(a))&&0>a.className.indexOf(" selectorOpen"))a.className+=" selectorOpen"};ObjectList.hideSelector=function(a){if(a=document.getElementById(a))a.className=a.className.replace(" selectorOpen","")};
ObjectList.hoverSelector=function(a){0>a.className.indexOf(" selectorHover")&&(a.className+=" selectorHover")};ObjectList.unhoverSelector=function(a){a.className=a.className.replace(" selectorHover","")};
ObjectList.prototype.updatePageSelectorText=function(){if(0===this.numberOfItemsInCurrentPage)ObjectList.updateElementText(this.id+"_pageSizeSelector","");else{var a=this.numberOfItemsPerPage*(this.currentPage-1)+1;ObjectList.updateElementText(this.id+"_pageSizeSelector",a+"-"+(a+this.numberOfItemsInCurrentPage-1))}};
ObjectList.updateElementText=function(a,b){var c=document.getElementById(a);if(c){var d=c.firstChild;1===d.nodeType&&(d=document.createTextNode(b),c.insertBefore(d,c.firstChild));d.nodeValue=b}};ObjectList.prototype.setEmptyPageNavigator=function(){this.setPrevNext()};ObjectList.prototype.setPageNavigator=function(){this.setPrevNext();this.updatePageSelectorText();this.selectPageSize(this.numberOfItemsPerPage)};
ObjectList.prototype.setPrevNext=function(){var a=document.getElementById(this.id+"_prevNextLinks"),b=[];a&&(b.push("\x3cdiv style\x3d'white-space:nowrap;'\x3e"),b.push("\x3cspan class\x3d'prevNext'\x3e"),b.push('\x3ca href\x3d"" id\x3d"'+this.id+'_firstPage"'),b.push(' onclick\x3d"'),1<this.currentPage&&(b.push("ObjectList.changePage('"),b.push(this.id),b.push("', 1);")),b.push('return false;"'),b.push(' class\x3d"'+(1<this.currentPage?"first":"firstoff")+'"\x3e'),b.push("\x3cimg"),b.push(' src\x3d"'+
UserContext.getUrl("/s.gif")+'"'),b.push(' class\x3d"first"'),b.push(' alt\x3d"'+this.listDefinition.labels.Paginator.first_page+'"'),b.push(' title\x3d"'+this.listDefinition.labels.Paginator.first_page+'"'),b.push("/\x3e"),b.push("\x3c/a\x3e"),b.push("\x3c/span\x3e"),b.push("\x3cspan class\x3d'prevNext'\x3e"),b.push('\x3ca href\x3d"" id\x3d"'+this.id+'_prevPage"'),b.push(' onclick\x3d"'),1<this.currentPage&&(b.push("ObjectList.changePage('"),b.push(this.id),b.push("', "),b.push(this.currentPage-
1),b.push(");")),b.push('return false;"'),b.push(' class\x3d"'+(1<this.currentPage?"prev":"prevoff")+'"\x3e'),b.push("\x3cimg"),b.push(' src\x3d"'+UserContext.getUrl("/s.gif")+'"'),b.push(' alt\x3d"'+this.listDefinition.labels.Paginator.previous_page+'"'),b.push(' title\x3d"'+this.listDefinition.labels.Paginator.previous_page+'"'),b.push(' class\x3d"prev"'),b.push("/\x3e"),b.push(this.listDefinition.labels.Paginator.previous),b.push("\x3c/a\x3e"),b.push("\x3c/span\x3e"),b.push("\x3cspan class\x3d'prevNext'\x3e"),
b.push('\x3ca href\x3d"" id\x3d"'+this.id+'_nextPage"'),b.push(' onclick\x3d"'),this.nextPageAvailable&&(b.push("ObjectList.changePage('"),b.push(this.id),b.push("', "),b.push(this.currentPage+1),b.push(");")),b.push('return false;"'),b.push(' class\x3d"'+(this.nextPageAvailable?"next":"nextoff")+'"\x3e'),b.push(this.listDefinition.labels.Paginator.next),b.push("\x3cimg"),b.push(' src\x3d"'+UserContext.getUrl("/s.gif")+'"'),b.push(' alt\x3d"'+this.listDefinition.labels.Paginator.next_page+'"'),b.push(' title\x3d"'+
this.listDefinition.labels.Paginator.next_page+'"'),b.push(' class\x3d"next"'),b.push("/\x3e"),b.push("\x3c/a\x3e"),b.push("\x3c/span\x3e"),b.push("\x3c/div\x3e"),a.innerHTML=b.join(""))};
ObjectList.prototype.updatePageNavigator=function(a,b){this.currentPage=a;this.nextPageAvailable=b;var c=document.getElementById(this.id+"_firstPage"),d=this.id,e=this.currentPage;1<this.currentPage?(c.className="first",c.onclick=function(){ObjectList.changePage(d,1);return!1}):(c.className="firstoff",c.onclick=function(){return!1});c=document.getElementById(this.id+"_prevPage");1<this.currentPage?(c.className="prev",c.onclick=function(){ObjectList.changePage(d,e-1);return!1}):(c.className="prevoff",
c.onclick=function(){return!1});c=document.getElementById(this.id+"_nextPage");this.nextPageAvailable?(c.className="next",c.onclick=function(){ObjectList.changePage(d,e+1);return!1}):(c.className="nextoff",c.onclick=function(){return!1});this.updatePageSelectorText()};ObjectList.changePage=function(a,b){ObjectList.instances[a].grid.getStore().load({params:{newPage:b}})};
ObjectList.prototype.selectPageSize=function(a){if(0<this.oldPageSize&&a!=this.oldPageSize){var b=document.getElementById(this.id+"_selector_opt_"+this.oldPageSize);b.className=b.className.replace(" optSelected","");var c=this.id,d=this.oldPageSize;b.onmousedown=function(){ObjectList.changePageSize(c,d)};this.numberOfItemsPerPage=a}a=document.getElementById(this.id+"_selector_opt_"+a);0>a.className.indexOf(" optSelected")&&(a.className+=" optSelected");a.onmousedown=function(){return!1}};
ObjectList.changePageSize=function(a,b){var c=ObjectList.instances[a];b!=c.numberOfItemsPerPage&&(c.oldPageSize=c.numberOfItemsPerPage,c.numberOfItemsPerPage=b,c.updateCookie(!0,!1,!1),c.grid.getStore().load({params:{newPageSize:b}}))};ObjectList.prototype.showLoadingScreen=function(){this.loadingScreen.show()};ObjectList.prototype.hideLoadingScreen=function(){this.loadingScreen.hide()};
ObjectList.prototype.getVisibleColums=function(){for(var a=this.grid.getColumnModel(),b=a.getColumnsBy(function(b,c){return!a.isHidden(c)}),c=new Map,d=0;d<b.length;d++){var e=b[d].id,f=e.indexOf("--");if(!(0>f)){var g=e.indexOf("---",f+2),g=e.substring(f+2,g);c.put(g,g)}}for(d=0;d<this.listDefinition.columnDefinitions.length;d++)b=this.listDefinition.columnDefinitions[d],!Knowledge.isNull(c.map[b.name])&&(!Knowledge.isNull(b.groupBy)&&""!==b.groupBy)&&c.put(b.groupBy,b.groupBy),Knowledge.isNull(c.map[b.name])&&
b.alwaysFetched&&c.put(b.name,b.name);Knowledge.isNull(this.listDefinition.idColumnName)||c.put(this.listDefinition.idColumnName,this.listDefinition.idColumnName);Knowledge.isNull(this.listDefinition.isSelectableColumnName)||c.put(this.listDefinition.isSelectableColumnName,this.listDefinition.isSelectableColumnName);d=[];for(g in c.map)g&&d.push(g);return d};
ObjectList.prototype.updateSelectionMenu=function(){var a;ObjectList.updateElementText(this.id+"_selectionSelector",this.listDefinition.labels.ArticleListLabels.SelectionCount.replace("{0}",this.selectedItems.getSize()));var b=document.getElementById(this.id+"_selectPage");b&&(a=this.numberOfItemsInCurrentPage-this.grid.getSelectionModel().getCount()-this.numberOfDisabledItems,b.innerHTML=this.listDefinition.labels.Paginator.select_page.replace("{0}",(0<=a?"+":"-")+a));if(b=document.getElementById(this.id+
"_deselectPage"))a=this.grid.getSelectionModel().getCount(),b.innerHTML=this.listDefinition.labels.Paginator.deselect_page.replace("{0}",(0<=a?"-":"+")+a);if(b=document.getElementById(this.id+"_clearAll"))a=this.selectedItems.getSize(),b.innerHTML=this.listDefinition.labels.Paginator.clear_all_selections.replace("{0}",(0<=a?"-":"+")+a)};
ObjectList.prototype.updateSelectionHeader=function(){var a=this.numberOfItemsInCurrentPage-this.numberOfDisabledItems;0<a&&a==this.grid.getSelectionModel().getCount()?(a=Ext.select(".x-grid3-hd-checker",!0,this.gridDiv),a.first()&&a.first().addClass("x-grid3-hd-checker-on")):(a=Ext.select(".x-grid3-hd-checker-on",!0,this.gridDiv),a.first()&&a.first().removeClass("x-grid3-hd-checker-on"))};
ObjectList.prototype.updateToolbarOnSelection=function(){var a=this.grid.getTopToolbar();if(0!==a.items.getCount()){var b=0<this.numberOfItemsInCurrentPage&&0<this.selectedItems.getSize(),c=this.listDefinition.header;if(c.tbItems)for(var d=0;d<c.tbItems.length;d++)if("button"===c.tbItems[d].type&&c.tbItems[d].disableOnNoSelection){var e=a.items.itemAt(d);b&&e.disabled?e.enable():!b&&!e.disabled&&e.disable()}}};
ObjectList.prototype.updateSelectionComponents=function(){this.updateSelectionMenu();this.updateSelectionHeader();this.updateToolbarOnSelection()};ObjectList.prototype.addItemInSelection=function(a){for(var b=a.get(this.realIdColumnName),c={},d=0;d<this.colsInSelection.length;d++)c[this.colsInSelection[d]]=a.get(this.colsInSelection[d]);this.selectedItems.put(b,c)};ObjectList.prototype.removeItemFromSelection=function(a){a=a.get(this.realIdColumnName);this.selectedItems.remove(a)};
ObjectList.prototype.updateSelection=function(){var a=this.grid.getStore().getRange();this.grid.getSelectionModel().suspendEvents(!1);for(var b=0;b<a.length;b++){var c=a[b].get(this.realIdColumnName);this.selectedItems.containsKey(c)&&this.grid.getSelectionModel().selectRow(b,!0)}this.grid.getSelectionModel().resumeEvents();this.updateSelectionComponents()};
ObjectList.selectPage=function(a){a=ObjectList.instances[a];for(var b=a.grid.getStore().getRange(),c=0;c<b.length;c++)a.grid.getSelectionModel().isSelected(c)||a.grid.getSelectionModel().selectRow(c,!0)};ObjectList.deselectPage=function(a){a=ObjectList.instances[a];for(var b=a.grid.getStore().getRange(),c=0;c<b.length;c++)a.grid.getSelectionModel().isSelected(c)&&a.grid.getSelectionModel().deselectRow(c)};ObjectList.clearAllSelection=function(a){a=ObjectList.instances[a];a.selectedItems=new Map;a.grid.getSelectionModel().clearSelections()};
ObjectList.prototype.getSelectedItemIds=function(){var a=[];this.selectedItems.each(function(b){a.push(b)});return a};ObjectList.prototype.getSelectedItems=function(){var a=[],b=this.selectedItems;b.each(function(c){a.push(b.get(c))});return a};ObjectList.columnMove=function(){this.updateCookie(!1,!1,!0);Knowledge.isNull(this.menu)||(this.menu.removeAll(),this.fillMenu())};ObjectList.columnResize=function(){this.updateCookie(!1,!1,!0)};
ObjectList.prototype.updateCookie=function(a,b,c){if(!this.inContextPane){this.cookieUpdated&&this.savePrefsTimeout&&clearTimeout(this.savePrefsTimeout);var d=this.listDefinition.type.replace(/:/g,"_"),e=Sfdc.Cookie.getCookie(this.userId+"_"+d,unescape);Knowledge.isNull(e)&&(e=Sfdc.Cookie.getCookie(this.userId+"_"+this.listDefinition.type,unescape));Knowledge.isNull(e)||"162@"!==e.substring(0,4)?(e=[],e.push("162"),e.push((new Date).getTime()),e.push(this.numberOfItemsPerPage),Knowledge.isNull(this.currentSort)?
(e.push(""),e.push("")):(e.push(this.currentSort),e.push(this.currentDir)),this._setColumnsInCookie(e)):(e=e.split("@"),e[1]=(new Date).getTime(),a&&(e[2]=this.numberOfItemsPerPage),b&&(Knowledge.isNull(this.currentSort)?(e[3]="",e[4]=""):(e[3]=this.currentSort,e[4]=this.currentDir)),c&&(e.splice(5,e.length-5),this._setColumnsInCookie(e)));e=e.join("@");Sfdc.Cookie.setCookie(this.userId+"_"+d,e,new Date((new Date).getTime()+31536E6),"/knowledge/",null,null,escape);this.cookieUpdated=!0;this.savePrefsTimeout=
setTimeout("ObjectList.savePrefs('"+this.id+"')",2E3)}};ObjectList.prototype._setColumnsInCookie=function(a){for(var b=this.grid.getColumnModel(),c=0;c<b.getColumnCount(!1);c++)if(!1===b.isHidden(c)){var d=b.getColumnId(c),e=d.indexOf("--");if(!(0>e)){var f=d.indexOf("---",e+2),d=d.substring(e+2,f);a.push(d);a.push(b.getColumnWidth(c))}}};ObjectList.windowOnUnload=function(a){this.cookieUpdated&&saveObjectListCookies()};
ObjectList.savePrefs=function(a){a=ObjectList.instances[a];a.cookieUpdated=!1;a.savePrefsTimeout=null;saveObjectListCookies()};ObjectList.prototype.getDataFromSelection=function(a,b){return this.selection.get(a)[b]};ObjectList.prototype.getDataFromId=function(a,b){for(var c=this.grid.getStore().getRange(),d=0;d<c.length;d++){var e=c[d];if(e.get(this.realIdColumnName)==a)return e.data[b]}return null};
ObjectList.prototype.getDataFromIds=function(a,b){for(var c=this.grid.getStore().getRange(),d=[],e=0;e<a.length;e++){for(var f=0;f<c.length;f++){var g=c[f];g.get(this.realIdColumnName)==a[e]&&d.push(g.data[b])}d.push(null)}return d};ObjectList.Menu=Ext.extend(Ext.menu.Menu,{autoWidth:function(){var a=this.el,b=this.ul;if(a){var c=this.width;c?a.setWidth(c):Ext.isIE&&(b=b.getWidth()+a.getFrameWidth("lr"),a.setWidth(b<this.minWidth?this.minWidth:b))}}});
ObjectList.CheckboxSelectionModel=function(a){Ext.apply(this,a);ObjectList.CheckboxSelectionModel.superclass.constructor.call(this,a)};
Ext.extend(ObjectList.CheckboxSelectionModel,Ext.grid.CheckboxSelectionModel,{setIsSelectableColumnName:function(a){this.isSelectableColumnName=a},setDisabledCheckboxCSS:function(a){Knowledge.isNull(a)||0===a.length?this.disabledCheckboxCSS="x-grid3-row-checker-disabled":this.disabledCheckboxCSS=a},setDisabledCheckboxTitle:function(a){Knowledge.isNull(a)||0===a.length?this.disabledCheckboxTitle="":this.disabledCheckboxTitle=' title\x3d"'+a+'"'},initEvents:function(){ObjectList.CheckboxSelectionModel.superclass.initEvents.call(this)},
handleMouseDown:function(){},renderer:function(a,b,c,d,e,f){d=f.objectList.selModel.getIsSelectableColumnName();return!Knowledge.isNull(d)&&!c.data[d]?'\x3cdiv class\x3d"'+f.objectList.selModel.disabledCheckboxCSS+'"'+f.objectList.selModel.disabledCheckboxTitle+"\x3e \x3c/div\x3e":ObjectList.CheckboxSelectionModel.superclass.renderer.call(this,a,b,c)},selectRow:function(a,b,c){var d=this.getIsSelectableColumnName();if(Knowledge.isNull(d)||!0===this.grid.store.getAt(a).data[d])if(this.objectList.addItemInSelection(this.grid.store.getAt(a)),
ObjectList.CheckboxSelectionModel.superclass.selectRow.call(this,a,b,c),this.objectList.listDefinition.columnAsExtensionRowContent&&(a=document.getElementById(this.objectList.id+"_extrow_"+a)))a.className="selectedExtensionRow"},deselectRow:function(a,b){this.objectList.removeItemFromSelection(this.grid.store.getAt(a));ObjectList.CheckboxSelectionModel.superclass.deselectRow.call(this,a,b);if(this.objectList.listDefinition.columnAsExtensionRowContent){var c=document.getElementById(this.objectList.id+
"_extrow_"+a);c&&(c.className="extensionRow")}},selectAll:function(){this.suspendEvents(!1);ObjectList.CheckboxSelectionModel.superclass.selectAll.call(this);this.resumeEvents();this.objectList.updateSelectionComponents()},clearSelections:function(a){this.suspendEvents(!1);ObjectList.CheckboxSelectionModel.superclass.clearSelections.call(this,a);this.resumeEvents();this.objectList.updateSelectionComponents()},getIsSelectableColumnName:function(){return this.isSelectableColumnName},onRefresh:function(){this.suspendEvents(!1);
ObjectList.CheckboxSelectionModel.superclass.onRefresh.call(this);this.resumeEvents();this.objectList.updateSelectionComponents()}});ObjectList.GroupingStore=function(a){Ext.apply(this,a);ObjectList.GroupingStore.superclass.constructor.call(this,a);a.sortInfo?(this.lastSort=a.sortInfo.field,this.lastOrder=a.sortInfo.direction):this.lastOrder=this.lastSort=null};
Ext.extend(ObjectList.GroupingStore,Ext.data.GroupingStore,{groupBy:function(a,b,c){c=c?"DESC"==String(c).toUpperCase()?"DESC":"ASC":this.groupDir;this.groupField==a&&this.groupDir==c&&!b||(b=this.multiSortInfo.sorters,0<b.length&&b[0].field==this.groupField&&b.shift(),this.groupField=a,this.groupDir=c,this.applyGroupField(),b=function(){this.fireEvent("groupchange",this,this.getGroupState())},this.groupOnSort?(this.sort(a,c),b.call(this)):this.remoteGroup?(this.on("load",b,this,{single:!0}),this.reload()):
(this.sort(a,c),b.call(this)))},sort:function(a,b){var c;Knowledge.isNull(a)?(c=this.objectList.currentSort,b=this.objectList.currentDir):c=a instanceof Array?a[0].field:a;b||(this.lastSort!=c||!this.lastOrder?(b=ObjectList._getColDef(this.objectList.listDefinition.columnDefinitions||[],c).sortOrder,this.lastSort=c):b="DESC"===this.lastOrder?"ASC":"DESC",this.lastOrder=b);ObjectList.GroupingStore.superclass.sort.call(this,a,b)}});
Knowledge.ArchiveBulkAction=Ext.extend(Knowledge.BulkAction,{executeArchiveNow:function(a){this.overlayTitle=Knowledge.LC.getLabel("KnowledgePublishingTab","ArchivingTitle");this.overlayMessageKey="ArchivingMessage";this.dueDate=null;this.execute(a,Knowledge.getConstant("archiveNowActionName"))},executeScheduledArchive:function(a,b){this.overlayTitle=Knowledge.LC.getLabel("KnowledgePublishingTab","SchedulingTitle");this.overlayMessageKey="SchedulingArchiveMessage";this.dueDate=b;this.execute(a,Knowledge.getConstant("scheduledArchiveActionName"))},
onExecute:function(a,b){archiveBulkAction(a,b,this.dueDate)},onComplete:function(a,b){var c=ObjectList.instances.articleList,d=c.getSelectedItems().length,c=c.getSelectedItems(),e=document.getElementById("archiveNowRadio").checked,h=document.getElementById("archiveDlg_dueDate").value,g,f;1>b.length?(g="confirm",1==d?f=e?Knowledge.LC.getLabel("KnowledgePublishingTab","ArchivingSingleSuccess",c[0].PlainTitle):Knowledge.LC.getLabel("KnowledgePublishingTab","ScheduledArchivingSingleSuccess",c[0].PlainTitle,
h):a<d?Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","ArchivingMultiCanceled",a,d,null):f=e?Knowledge.LC.getLabel("KnowledgePublishingTab","ArchivingMultiSuccess",d):Knowledge.LC.getLabel("KnowledgePublishingTab","ScheduledArchivingMultiSuccess",d,h)):(g="error",f=1==d?e?Knowledge.LC.getLabel("KnowledgePublishingTab","ArchivingSingleFailed"):Knowledge.LC.getLabel("KnowledgePublishingTab","ScheduledArchivingSingleFailed"):e?Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","ArchivingMultiFailed",
b.length,d,null):Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","ScheduledArchivingMultiFailed",b.length,d,null));runSearch(f,g)}});
function archiveSelectedArticles(){var a=ObjectList.instances.articleList.getSelectedItems();clearPageMessage();if(0<a.length){for(var b=0,c=0;c<a.length;c++)canUserArchive(a[c])||b++;b==a.length?setPageMessage(Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NoPermissionToArchive",b),"error"):(showArchiveDlg(),1==a.length?document.getElementById("archiveSelectedText").innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","ArchiveSingleSelected"):document.getElementById("archiveSelectedText").innerHTML=
Knowledge.LC.getLabel("KnowledgePublishingTab","ArchiveMultiSelected",a.length)+(0<b?"\x3cbr/\x3e"+Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NumberArticleToArchiveInsufficientPrivilege",b):""),b=a[0].ScheduledArchivingDate,1==a.length&&b&&null!==b?(document.getElementById("archiveDlg_dueDate").value=b,document.getElementById("scheduleArchiveRadio").checked="checked",document.getElementById("archiveDlg_dueDate_required").className="requiredMarkOn"):(document.getElementById("archiveDlg_dueDate").value=
"",document.getElementById("archiveNowRadio").checked="checked",document.getElementById("archiveDlg_dueDate_required").className="requiredMarkOff"))}}
function handleArchiveValidate(){if(document.getElementById("scheduleArchiveRadio").checked){if(!KnowledgeDatePicker.hasValidDate("archiveDlg_dueDate"))return alert(Knowledge.LC.getLabel("KnowledgePublishingTab","InvalidDateMessage")),!1;if(DateUtil.getDateFromFormat(document.getElementById("archiveDlg_dueDate").value,UserContext.dateFormat)<=new Date){var a=confirm(Knowledge.LC.getLabel("KnowledgePublishingTab","ListScheduledArchivingDateInThePastMessage"));a&&(document.getElementById("archiveNowRadio").checked=
!0);return a}}return!0}function handleArchiveOK(){var a=Knowledge.BulkAction.instances.archive;document.getElementById("archiveNowRadio").checked?a.executeArchiveNow(ObjectList.instances.articleList.getSelectedItemIds()):a.executeScheduledArchive(ObjectList.instances.articleList.getSelectedItemIds(),document.getElementById("archiveDlg_dueDate").value)};
Knowledge.AssignBulkAction=Ext.extend(Knowledge.BulkAction,{executeAssign:function(e,b,d,a,c,f){this.dueDate=d;this.userId=a;this.instructions=c;this.emailNotification=f;this.execute(e,b)},onExecute:function(e,b){assignBulkAction(e,b,this.dueDate,this.userId,this.instructions,this.emailNotification)},onComplete:function(e,b){var d=ObjectList.instances.articleList.getSelectedItems(),a=d.length,c=Sfdc.String.escapeToHtml(document.getElementById("assignee").value),f,g=document.getElementById("assignDlg:assignableObjectType").value;
1>b.length?(f="confirm",1==a?(d=d[0].PlainTitle,c="Translation"==g?Knowledge.LC.getLabel("KnowledgePublishingTab","TranslationSingleAssignmentSuccess",d,c):Knowledge.LC.getLabel("KnowledgePublishingTab","SingleAssignmentSuccess",d,c)):c=e<a?"Translation"==g?Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","TranslationMultiAssignCanceled",e,a,c):Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","MultiAssignCanceled",e,a,c):"Translation"==g?Knowledge.LC.getLabel("KnowledgePublishingTab",
"TranslationMultiAssignSuccess",a,c):Knowledge.LC.getLabel("KnowledgePublishingTab","MultiAssignSuccess",a,c)):(f="error",c=1==a?"Translation"==g?Knowledge.LC.getLabel("KnowledgePublishingTab","TranslationSingleAssignFailed",c):Knowledge.LC.getLabel("KnowledgePublishingTab","SingleAssignFailed",c):"Translation"==g?Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","TranslationMultiAssignFailed",b.length,a,c):Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","MultiAssignFailed",b.length,a,
c));0<e?runSearch(c,f):setPageMessage(c,f)}});function assignSelectedArticles(){document.body.style.cursor="wait";callAssignSelectedArticles("Article")}function assignSelectedTranslations(){document.body.style.cursor="wait";callAssignSelectedArticles("Translation")}
function showRefreshedAssignDialog(e){var b=ObjectList.instances.articleList.getSelectedItems();document.body.style.cursor="default";setPageMessage("");if(0<b.length){for(var d=Ext.query("span[@id$\x3dassignWarningMsg]")[0],a,c=a=0;c<b.length;c++)canUserEdit(b[c])||a++;a==b.length?"Article"==e?setPageMessage(Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NoPermissionArticleToAssign",a),"error"):setPageMessage(Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NoPermissionTranslationToAssign",
a),"error"):(1==b.length?(a=b[0].PlainTitle,document.getElementById("assignDlg:articleTitle").innerHTML=a,"Article"==e?(a=b[0].ScheduledPublishingDate,null!==a&&""!==a?showWarningMsg(d,Knowledge.LC.getLabel("KnowledgePublishingTab","AssignmentDialogScheduledPublicationWarning",a)):hideWarningMsg(d)):""!==b[0].TranslationComplete?showWarningMsg(d,Knowledge.LC.getLabel("KnowledgePublishingTab","AssignTranslationWarning")):hideWarningMsg(d),d="",a="none"):("Translation"==e?showWarningMsg(d,Knowledge.LC.getLabel("KnowledgePublishingTab",
"AssignTranslationsWarning")):showWarningMsg(d,Knowledge.LC.getLabel("KnowledgePublishingTab","MultipleAssignmentDialogScheduledPublicationWarning")),"Translation"==e?1<b.length?document.getElementById("assignDlg:selectedArticleLabel").innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","NumberTranslationSelected",b.length)+(0<a?"\x3cbr/\x3e"+Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NumberTranslationToAssignInsufficientPrivilege",a):""):document.getElementById("assignDlg:selectedArticleLabel").innerHTML=
Knowledge.LC.getLabel("KnowledgePublishingTab","NumberTranslationSelectedOne",b.length):1<b.length?document.getElementById("assignDlg:selectedArticleLabel").innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","NumberArticleSelected",b.length)+(0<a?"\x3cbr/\x3e"+Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NumberArticleToAssignInsufficientPrivilege",a):""):document.getElementById("assignDlg:selectedArticleLabel").innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","NumberArticleSelectedOne",
b.length),d="none",a=""),Ext.query("span[@id$\x3dassignTcReviseWarningMsg]")[0].style.display="Translation"==e?"":"none",document.getElementById("assignDlg:assignableObjectType").value=e,document.getElementById("assignDlg_instructions").value="",c=document.getElementById("assignDlg_instructions_counter"),c.innerHTML="",c.parentNode.className="textCounterMiddle",document.getElementById("assignDlg_dueDate").value="",document.getElementById("assignDlg:emailNotification").checked=!1,document.getElementById("assignDlg:singleTitle").style.display=
d,document.getElementById("assignDlg:singleTitleWarning").style.display=d,document.getElementById("assignDlg:multiTitle").style.display=a,document.getElementById("assignDlg:multiTitleWarning").style.display=a,showAssignDlg(),document.getElementById("assignDlg_SimpleDialogTitle").innerHTML="Translation"==e?1<b.length?Knowledge.LC.getLabel("KnowledgePublishingTab","AssignTranslationsDialogTitle"):Knowledge.LC.getLabel("KnowledgePublishingTab","AssignTranslationDialogTitle"):Knowledge.LC.getLabel("KnowledgePublishingTab",
"AssignArticlesDialogTitle"))}}
function handleAssignValidate(){var e=!0,b=Ext.get("assignDlg_instructions");b.dom.value.length>b.getAttribute("data-maxlength")&&(alert("'"+Knowledge.LC.getLabel("ArticleEdit","AssignmentDialogInstructions")+"': "+Knowledge.LC.getLabel("KnowledgeTextArea","MaxLengthExceeded")),e=!1);!KnowledgeDatePicker.isEmpty("assignDlg_dueDate")&&!KnowledgeDatePicker.hasValidDate("assignDlg_dueDate")&&(alert(Knowledge.LC.getLabel("KnowledgePublishingTab","InvalidDateMessage")),e=!1);var d;"select-one"==document.getElementById("assignee_lkid").type?
(d=document.getElementById("assignee_lkid"),b=d.value,d=d.options[d.selectedIndex].text):(b=document.getElementById("assignee_lkid").value,d=document.getElementById("assignee").value);var a,c=document.getElementById("assignee_mlktp");c&&(a=c.value);if(e)bulkAssignValidateAssignee(b,d,a,"assignDlg_SimpleDialog");else return e}
function handleAssignOK(){var e=document.getElementById("assignee_lkid").value,b=document.getElementById("assignDlg:assignableObjectType").value,d=Knowledge.BulkAction.instances.assign,a;if("Article"==b)a=Knowledge.getConstant("assignActionName"),b=ObjectList.instances.articleList.getSelectedItemIds();else{a=Knowledge.getConstant("assignTranslationActionName");for(var b=[],c=ObjectList.instances.articleList.getSelectedItems(),f=0;f<c.length;f++)b.push(c[f].TranslationIdIsTranslationComplete)}d.executeAssign(b,
a,document.getElementById("assignDlg_dueDate").value,e,document.getElementById("assignDlg_instructions").value,document.getElementById("assignDlg:emailNotification").checked)};
Knowledge.DeleteBulkAction=Ext.extend(Knowledge.BulkAction,{executeDelete:function(a,b){this.execute(a,b)},onExecute:function(a,b){deleteBulkAction(a,b)},onComplete:function(a,b){var c=ObjectList.instances.articleList.getSelectedItems(),d=c.length,e=document.getElementById("deleteDlg:assignableObjectType").value,f;1>b.length?(f="confirm",c=1==d?Knowledge.LC.getLabel("KnowledgePublishingTab","DeletingSingleSuccess",c[0].PlainTitle):a<d?Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","DeletingMultiCanceled",
a,d,null):"Translation"==e?Knowledge.LC.getLabel("KnowledgePublishingTab","DeletingMultiTranslationSuccess",d):Knowledge.LC.getLabel("KnowledgePublishingTab","DeletingMultiSuccess",d)):(f="error",c=1==d?Knowledge.LC.getLabel("KnowledgePublishingTab","DeletingSingleFailed"):1==b.length?Knowledge.LC.getLabel("KnowledgePublishingTab","DeletingMultiFailedOne",b.length,d):Knowledge.LC.getLabel("KnowledgePublishingTab","DeletingMultiFailed",b.length,d));0<a?runSearch(c,f):setPageMessage(c,f)}});
function deleteSelectedObjects(a){clearPageMessage();var b=ObjectList.instances.articleList.getSelectedItems();if(0<b.length){for(var c=document.getElementById("deleteConfirmText"),d=document.getElementById("deleteSelectedArticles"),e=0,f=0;f<b.length;f++)canUserDelete(b[f])||e++;if(e==b.length){"Translation"==a?setPageMessage(Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NoPermissionTranslationToDelete",e),"error"):setPageMessage(Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NoPermissionArticleToDelete",
e),"error");return}1<b.length?(d.innerHTML="Translation"==a?1<b.length?Knowledge.LC.getLabel("KnowledgePublishingTab","NumberTranslationSelected",b.length)+(0<e?"\x3cbr/\x3e"+Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NumberTranslationToDeleteInsufficientPrivilege",e):""):Knowledge.LC.getLabel("KnowledgePublishingTab","NumberTranslationSelectedOne",b.length):1<b.length?Knowledge.LC.getLabel("KnowledgePublishingTab","NumberArticleSelected",b.length)+(0<e?"\x3cbr/\x3e"+Knowledge.LC.getNumberedLabel("KnowledgePublishingTab",
"NumberArticleToDeleteInsufficientPrivilege",e):""):Knowledge.LC.getLabel("KnowledgePublishingTab","NumberArticleSelectedOne",b.length),d.style.display="block","true"==Knowledge.getConstant("isMultiLanguageEnabled")?c.innerHTML="Translation"==a?Knowledge.LC.getLabel("KnowledgePublishingTab","MLDeletingMultiTranslationConfirm"):Knowledge.LC.getLabel("KnowledgePublishingTab","MLDeletingMultiConfirm"):c.innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","SLDeletingMultiConfirm")):(d.style.display=
"none","true"==Knowledge.getConstant("isMultiLanguageEnabled")?c.innerHTML="Translation"==a?Knowledge.LC.getLabel("KnowledgePublishingTab","MLDeletingSingleTranslationConfirm"):Knowledge.LC.getLabel("KnowledgePublishingTab","MLDeletingSingleConfirmBoth"):c.innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","SLDeletingSingleConfirm"));showDeleteConfirmDlg();document.getElementById("deleteDlg_SimpleDialogTitle").innerHTML=1<b.length?"Translation"==a?Knowledge.LC.getLabel("KnowledgePublishingTab",
"DeletingConfirmTranslationTitle"):Knowledge.LC.getLabel("KnowledgePublishingTab","DeletingConfirmTitle"):"Translation"==a?Knowledge.LC.getLabel("KnowledgePublishingTab","DeletingSingleConfirmTranslationTitle"):Knowledge.LC.getLabel("KnowledgePublishingTab","DeletingSingleConfirmTitle")}document.getElementById("deleteDlg:assignableObjectType").value=a}function deleteSelectedArticles(){deleteSelectedObjects("Article")}function deleteSelectedTranslations(){deleteSelectedObjects("Translation")}
function isRadioChecked(a){return(a=document.getElementById(a))&&a.checked}
function handleDeleteOK(){var a,b=document.getElementById("deleteDlg:assignableObjectType").value;a=Knowledge.getConstant("viewGroupNames");if(isRadioChecked(a.ML_DRAFT_ARTICLES)||isRadioChecked(a.SL_DRAFT_ARTICLES))a=Knowledge.getConstant("deleteDraftActionName");else if(isRadioChecked(a.ML_ARCHIVED_ARTICLES)||isRadioChecked(a.SL_ARCHIVED_ARTICLES))a=Knowledge.getConstant("deleteArchiveActionName");else if(isRadioChecked(a.ML_DRAFT_TRANSLATIONS))a=Knowledge.getConstant("deleteDraftTranslationActionName");
else return;var c=ObjectList.instances.articleList,d=Knowledge.BulkAction.instances.deleteBA;if("Translation"==b)for(var b=[],c=c.getSelectedItems(),e=0;e<c.length;e++)b.push(c[e].ArticleLanguageId);else b=c.getSelectedItemIds();d.executeDelete(b,a)};
Knowledge.PublishBulkAction=Ext.extend(Knowledge.BulkAction,{executePublishArticleNewNow:function(a){this.overlayTitle=Knowledge.LC.getLabel("KnowledgePublishingTab","PublishingTitle");this.overlayMessageKey="PublishingMessage";this.dueDate=null;this.execute(a,Knowledge.getConstant("publishNewNowActionName"))},executePublishArticleNow:function(a){this.overlayTitle=Knowledge.LC.getLabel("KnowledgePublishingTab","PublishingTitle");this.overlayMessageKey="PublishingMessage";this.dueDate=null;this.execute(a,
Knowledge.getConstant("publishNowActionName"))},executeScheduledPublishArticleNew:function(a,b){this.overlayTitle=Knowledge.LC.getLabel("KnowledgePublishingTab","SchedulingTitle");this.overlayMessageKey="SchedulingPublishMessage";this.dueDate=b;this.execute(a,Knowledge.getConstant("scheduledPublishNewActionName"))},executePublishTranslation:function(a){this.overlayTitle=Knowledge.LC.getLabel("KnowledgePublishingTab","PublishingTitle");this.overlayMessageKey="PublishingMessage";this.dueDate=null;this.execute(a,
Knowledge.getConstant("publishTranslationActionName"))},onExecute:function(a,b){publishBulkAction(a,b,this.dueDate)},onComplete:function(a,b){var e=document.getElementById("publishDlg:assignableObjectType").value,c=ObjectList.instances.articleList.getSelectedItems(),d=c.length,f=document.getElementById("publishNowRadio").checked,g=document.getElementById("publishDlg_dueDate").value,h;0===b.length?(h="confirm",e=1==d?f?"true"==Knowledge.getConstant("isMultiLanguageEnabled")?"Translation"==e?Knowledge.LC.getLabel("KnowledgePublishingTab",
"MLSingleTranslationPublishingSuccess",c[0].PlainTitle):Knowledge.LC.getLabel("KnowledgePublishingTab","MLSinglePublishingSuccess",c[0].PlainTitle):Knowledge.LC.getLabel("KnowledgePublishingTab","SLSinglePublishingSuccess",c[0].PlainTitle):"true"==Knowledge.getConstant("isMultiLanguageEnabled")?Knowledge.LC.getLabel("KnowledgePublishingTab","MLSingleScheduledPublishingSuccess",c[0].PlainTitle,g):Knowledge.LC.getLabel("KnowledgePublishingTab","SLSingleScheduledPublishingSuccess",c[0].PlainTitle,g):
a<d?Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","MultiPublishingCanceled",a,d,null):f?"true"==Knowledge.getConstant("isMultiLanguageEnabled")?"Translation"==e?Knowledge.LC.getLabel("KnowledgePublishingTab","MLMultiTranslationPublishingSuccess",d):Knowledge.LC.getLabel("KnowledgePublishingTab","MLMultiPublishingSuccess",d):Knowledge.LC.getLabel("KnowledgePublishingTab","SLMultiPublishingSuccess",d):"true"==Knowledge.getConstant("isMultiLanguageEnabled")?Knowledge.LC.getLabel("KnowledgePublishingTab",
"MLMultiScheduledPublishingSuccess",d,g):Knowledge.LC.getLabel("KnowledgePublishingTab","SLMultiScheduledPublishingSuccess",d,g)):(h="error",e=1==d?f?Knowledge.LC.getLabel("KnowledgePublishingTab","SinglePublishingFailed"):Knowledge.LC.getLabel("KnowledgePublishingTab","ScheduledSinglePublishingFailed"):f?Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","MultiPublishingFailed",b.length,d,null):Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","ScheduledMultiPublishingFailed",b.length,d,
null));0<a?runSearch(e,h):setPageMessage(e,h)}});
function publishSelectedObjects(a){var b=ObjectList.instances.articleList.getSelectedItems();clearPageMessage();if(0<b.length){for(var e=0,c=0;c<b.length;c++)canUserPublish(b[c])||e++;if(e==b.length)"Translation"==a?setPageMessage(Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NoPermissionTranslationToPublish",e),"error"):setPageMessage(Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NoPermissionArticleToPublish",e),"error");else{showPublishDlg();document.getElementById("publishDlg:assignableObjectType").value=
a;var c=document.getElementById("publishDlg_SimpleDialogTitle"),d=Ext.query("span[@id$\x3dpublishWarningMsg]")[0];if("Translation"==a)c.innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","MultiPublishTranslationTitle"),showWarningMsg(d,Knowledge.LC.getLabel("KnowledgePublishingTab","PublishTranslationSelectionLabel")),1<b.length?document.getElementById("publishDlg:selectedArticleLabel").innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","NumberTranslationSelected",b.length)+(0<e?"\x3cbr/\x3e"+
Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NumberTranslationToPublishInsufficientPrivilege",e):""):document.getElementById("publishDlg:selectedArticleLabel").innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","NumberTranslationSelectedOne",b.length),document.getElementById("publishDlg:explanationText").style.display="block",document.getElementById("publishNowRadio").style.display="none",document.getElementById("publishNowRadioLabel").style.display="none",document.getElementById("publishNowRadio").checked=
"checked",document.getElementById("publishScheduledRadio").style.display="none",document.getElementById("publishScheduledRadioLabel").style.display="none",document.getElementById("publishScheduledRadioDatePicker").style.display="none",document.getElementById("flagAsNewDiv").style.display="none";else{c.innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","MultiPublishArticleTitle");"true"==Knowledge.getConstant("isMultiLanguageEnabled")?showWarningMsg(d,Knowledge.LC.getLabel("KnowledgePublishingTab",
"MLPublishArticleSelectionLabel")):showWarningMsg(d,Knowledge.LC.getLabel("KnowledgePublishingTab","SLPublishArticleSelectionLabel"));document.getElementById("publishDlg:explanationText").style.display="none";document.getElementById("publishDlg:explanationText").style.display="none";document.getElementById("publishNowRadio").style.display="";document.getElementById("publishNowRadioLabel").style.display="";document.getElementById("publishScheduledRadio").style.display="";document.getElementById("publishScheduledRadioLabel").style.display=
"";document.getElementById("publishScheduledRadioDatePicker").style.display="";a=!1;for(c=0;c<b.length;c++)if(!0===b[c].isOnline){a=!0;break}a?document.getElementById("flagAsNewDiv").style.display="block":document.getElementById("flagAsNewDiv").style.display="none";a=b[0].ScheduledPublishingDate;1==b.length&&a&&null!==a?(document.getElementById("publishDlg_dueDate").value=a,document.getElementById("publishScheduledRadio").checked="checked",document.getElementById("publishDlg_dueDate_required").className=
"requiredMarkOn",document.getElementById("publishAsNewCheck").checked=!0,document.getElementById("publishAsNewCheck").disabled=!0):(document.getElementById("publishDlg_dueDate").value="",document.getElementById("publishNowRadio").checked="checked",document.getElementById("publishDlg_dueDate_required").className="requiredMarkOff",document.getElementById("publishAsNewCheck").checked=!0,document.getElementById("publishAsNewCheck").disabled=!1);1<b.length?document.getElementById("publishDlg:selectedArticleLabel").innerHTML=
Knowledge.LC.getLabel("KnowledgePublishingTab","NumberArticleSelected",b.length)+(0<e?"\x3cbr/\x3e"+Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NumberArticleToPublishInsufficientPrivilege",e):""):document.getElementById("publishDlg:selectedArticleLabel").innerHTML=Knowledge.LC.getLabel("KnowledgePublishingTab","NumberArticleSelectedOne",b.length)}}}}function publishSelectedTranslations(){publishSelectedObjects("Translation")}
function publishSelectedArticles(){publishSelectedObjects("Article")}function onSelectPublishOption(a){var b=document.getElementById("publishAsNewCheck");b&&("scheduled"==a?(b.checked=!0,b.disabled=!0):(b.checked=!0,b.disabled=!1))}
function handlePublishValidate(){if("Article"==document.getElementById("publishDlg:assignableObjectType").value&&document.getElementById("publishScheduledRadio").checked){if(!KnowledgeDatePicker.hasValidDate("publishDlg_dueDate"))return alert(Knowledge.LC.getLabel("KnowledgePublishingTab","InvalidDateMessage")),!1;if(DateUtil.getDateFromFormat(document.getElementById("publishDlg_dueDate").value,UserContext.dateFormat)<=new Date){var a=confirm(Knowledge.LC.getLabel("KnowledgePublishingTab","ListScheduledPublishingDateInThePastMessage"));
a&&(document.getElementById("publishNowRadio").checked=!0);return a}}return!0}
function handlePublishOK(a,b){var e=document.getElementById("publishDlg:assignableObjectType").value,c=ObjectList.instances.articleList.getSelectedItemIds(),d=Knowledge.BulkAction.instances.publish;"Article"==e?document.getElementById("publishNowRadio").checked?document.getElementById("publishAsNewCheck").checked?d.executePublishArticleNewNow(c):d.executePublishArticleNow(c):d.executeScheduledPublishArticleNew(c,KnowledgeDatePicker.getDateAsString("publishDlg_dueDate")):d.executePublishTranslation(c)}
;
Ext.namespace("KnowledgeManagement");KnowledgeManagement.RemoveAlert=function(a){this.init(a)};KnowledgeManagement.RemoveAlert.instances={};KnowledgeManagement.RemoveAlert.getInstance=function(a){return KnowledgeManagement.RemoveAlert.instances[a]};KnowledgeManagement.RemoveAlert.createOrGet=function(a){var b=KnowledgeManagement.RemoveAlert.getInstance(a.id);null===b&&(b=new KnowledgeManagement.RemoveAlert(a));return b};
KnowledgeManagement.RemoveAlert.prototype.init=function(a){this.id=a.id;this.onOk=a.onOk;var b=this;KnowledgeManagement.RemoveAlert[this.id+"_okHandler"]=function(){Knowledge.getFunction(b.onOk).call(window,b.articleId,b.languageId)};KnowledgeManagement.RemoveAlert.instances[this.id]=this};KnowledgeManagement.RemoveAlert.prototype.setAndShow=function(a,b){this.articleId=a;this.languageId=b;window[this.id+"RemoveAlertInvoke"].call(this)};
Knowledge.SubmitForTranslationBulkAction=Ext.extend(Knowledge.BulkAction,{executeSubmitForTranslation:function(a,b,c){this.translationInfos=b;this.actionWeight=c;this.execute(a,Knowledge.getConstant("submitForTranslationActionName"))},onExecute:function(a,b){submitForTranslationBulkAction(a,b,this.translationInfos)},onComplete:function(a,b){var c=ObjectList.instances.articleList.getSelectedItems(),d=c.length,e;1>b.length?(e="confirm",c=1==d?Knowledge.LC.getLabel("KnowledgePublishingTab","SubmittingMultiSuccessOne",
c[0].PlainTitle):a<d?Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","SubmittingMultiCanceledOne",a,d):Knowledge.LC.getLabel("KnowledgePublishingTab","SubmittingMultiSuccess",d)):(e="error",c=1==d?Knowledge.LC.getLabel("KnowledgePublishingTab","SubmittingSingleFailed"):Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","SubmittingMultiFailed",b.length,d));0<a?runSearch(c,e):setPageMessage(c,e)}});
function submitForTranslationSelectedArticles(){var a=ObjectList.instances.articleList.getSelectedItems();clearPageMessage();if(0<a.length){for(var b=0,c=0;c<a.length;c++)canUserCreateTranslations(a[c])||b++;b==a.length?setPageMessage(Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NoPermissionToSubmitForTranslation",b),"error"):(document.getElementById("multipleArticlesMsg").innerHTML=Knowledge.LC.getLabel("KnowledgeSubmitForTranslationDialog",1<a.length?"MultipleArticlesMessagePlural":"MultipleArticlesMessageSingular",
a.length)+(0<b?"\x3cbr/\x3e"+Knowledge.LC.getNumberedLabel("KnowledgePublishingTab","NumberArticleToSubmitInsufficientPrivilege",b):""),submitForTranslationDlgInvoke())}}function handleSubmitForTranslationOK(a){var b=Knowledge.BulkAction.instances.submitForTranslation,c=null===a?null:Ext.util.JSON.encode(a),d=0,e;for(e in a.assignments)e&&d++;b.executeSubmitForTranslation(ObjectList.instances.articleList.getSelectedItemIds(),c,d)};
Ext.namespace("Knowledge");
Knowledge.sidebarBoxPanel={activeSidebarContentDiv:null,activeIconDiv:null,activeIconClass:null,sidebarBoxTitleIconClass:"sidebarBoxTitleIcon ",sidebarModalDivId:null,sidebarModalDiv:null,init:function(a){this.sidebarModalDivId=a},toggleSidebarBox:function(a,b,c){if(!a){if(!this.activeSidebarContentDiv)return;a=this.activeSidebarContentDiv.id}a=document.getElementById(a);this.sidebarModalDiv||(this.sidebarModalDiv=document.getElementById(this.sidebarModalDivId));"sidebarBoxCollapsed"==a.className?
(a.className="sidebarBoxPopUp",this.sidebarModalDiv.style.display="",this.activeSidebarContentDiv=a,activeIconDiv=b,activeIconClass=this.sidebarBoxTitleIconClass+c,this.setCollapsedIconClass(b,c+"Clicked")):(a.className="sidebarBoxCollapsed",this.sidebarModalDiv.style.display="none",this.activeSidebarContentDiv=null,activeIconDiv.className=activeIconClass)},setCollapsedIconClass:function(a,b){a.className=this.sidebarBoxTitleIconClass+b}};
Ext.namespace("Knowledge","Knowledge.VersionHistory");Knowledge.VersionHistory.toggleDisplayEvents=function(d,b){var a=b.childNodes[0],c=b.parentNode.parentNode.nextSibling.childNodes[0].childNodes[0];"versionHistoryFoldCollapsed"==a.className?(a.src="/img/knowledge/versionHistory_expanded.gif",c.style.display="block",a.className="versionHistoryFoldExpanded"):(a.src="/img/knowledge/versionHistory_collapsed.gif",c.style.display="none",a.className="versionHistoryFoldCollapsed")};

//# sourceMappingURL=/javascript/1590082529000/sfdc/source/Knowledge.js.map
